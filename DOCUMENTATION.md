# üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è SmartCoach

–¶–µ–π —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤—Å—é –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –ø—Ä–æ–µ–∫—Ç—É, –∑—ñ–±—Ä–∞–Ω—É –∑ —Ä—ñ–∑–Ω–∏—Ö .md —Ñ–∞–π–ª—ñ–≤.

---

# –ü–ª–∞–Ω —Ä–æ–∑—Ä–æ–±–∫–∏

# –ü–ª–∞–Ω —Ä–æ–∑—Ä–æ–±–∫–∏ SmartCoach Backend

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—á–Ω–∏–π —Å—Ç–µ–∫

- **Runtime**: Node.js
- **Framework**: Express.js
- **Language**: TypeScript
- **Database**: MongoDB
- **ODM**: Mongoose
- **Authentication**: JWT (jsonwebtoken)
- **Validation**: Joi / Zod
- **Security**: bcrypt, helmet, express-rate-limit
- **Logging**: Winston / Pino
- **Testing**: Jest + Supertest

---

## üìÅ –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
SmartCouch-FullStack/
‚îú‚îÄ‚îÄ client/                    # React Native –¥–æ–¥–∞—Ç–æ–∫ (–ø–æ—Ç–æ—á–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îÇ   ‚îî‚îÄ‚îÄ (–≤—Å—ñ –ø–æ—Ç–æ—á–Ω—ñ —Ñ–∞–π–ª–∏)
‚îÇ
‚îú‚îÄ‚îÄ server/                    # Backend API
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.ts    # –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è MongoDB
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ env.ts        # –í–∞–ª—ñ–¥–∞—Ü—ñ—è env –∑–º—ñ–Ω–Ω–∏—Ö
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.ts     # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/       # –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ (–æ–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤)
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ programs.controller.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ workoutPlans.controller.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ models/           # Mongoose –º–æ–¥–µ–ª—ñ
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ User.model.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Client.model.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Program.model.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ WorkoutPlan.model.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ RefreshToken.model.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes/           # API –º–∞—Ä—à—Ä—É—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ index.ts      # –û–±'—î–¥–Ω–∞–Ω–Ω—è –≤—Å—ñ—Ö —Ä–æ—É—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.routes.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user.routes.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.routes.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ programs.routes.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ workoutPlans.routes.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middleware/       # Middleware
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.ts      # JWT –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ validation.middleware.ts # –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.middleware.ts     # –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rateLimiter.middleware.ts # Rate limiting
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ logger.middleware.ts    # –õ–æ–≥—É–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/         # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ sms.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ clients.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ programs.service.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ workoutPlans.service.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/           # –£—Ç–∏–ª—ñ—Ç–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.util.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ password.util.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.util.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validators.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/           # TypeScript —Ç–∏–ø–∏/—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ express.d.ts  # –†–æ–∑—à–∏—Ä–µ–Ω–Ω—è Express types
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.types.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ client.types.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ common.types.ts
‚îÇ   ‚îÇ   ‚îÇ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ app.ts           # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É Express
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ tests/               # –¢–µ—Å—Ç–∏
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ integration/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ e2e/
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îú‚îÄ‚îÄ .gitignore
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îú‚îÄ‚îÄ tsconfig.json
‚îÇ   ‚îî‚îÄ‚îÄ README.md
‚îÇ
‚îî‚îÄ‚îÄ README.md
```

---

## üéØ –ü–æ–∫—Ä–æ–∫–æ–≤–∏–π –ø–ª–∞–Ω —Ä–æ–∑—Ä–æ–±–∫–∏

### –ï—Ç–∞–ø 1: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏ (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 1.1 –°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏ –ø—Ä–æ–µ–∫—Ç—É

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–∞–ø–∫—É `server/`
- [ ] –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ npm –ø—Ä–æ–µ–∫—Ç
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ TypeScript (tsconfig.json)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤—É —Å—Ç—Ä—É–∫—Ç—É—Ä—É –ø–∞–ø–æ–∫
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ ESLint + Prettier –¥–ª—è TypeScript
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ `.gitignore` –¥–ª—è server

#### 1.2 –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

- [ ] Express.js —Ç–∞ —Ç–∏–ø–∏
- [ ] Mongoose —Ç–∞ —Ç–∏–ø–∏
- [ ] TypeScript —Ç–∞ ts-node
- [ ] Nodemon –¥–ª—è development
- [ ] JWT (jsonwebtoken)
- [ ] Bcrypt –¥–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- [ ] Joi –∞–±–æ Zod –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- [ ] Helmet –¥–ª—è –±–µ–∑–ø–µ–∫–∏
- [ ] Express-rate-limit
- [ ] CORS
- [ ] Winston/Pino –¥–ª—è –ª–æ–≥—É–≤–∞–Ω–Ω—è
- [ ] Dotenv –¥–ª—è env –∑–º—ñ–Ω–Ω–∏—Ö
- [ ] Jest + Supertest –¥–ª—è —Ç–µ—Å—Ç—ñ–≤

#### 1.3 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ `.env.example` –∑ —É—Å—ñ–º–∞ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é env –∑–º—ñ–Ω–Ω–∏—Ö (env.ts)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB (database.ts)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è (logger.ts)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤–∏–π Express app (app.ts)
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ middleware –¥–ª—è –±–µ–∑–ø–µ–∫–∏ (helmet, CORS, rate limiting)

#### 1.4 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è TypeScript

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ tsconfig.json –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è–º–∏
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ paths –¥–ª—è —ñ–º–ø–æ—Ä—Ç—ñ–≤ (@/controllers, @/models, —Ç–æ—â–æ)
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ –±–∞–∑–æ–≤—ñ —Ç–∏–ø–∏ –¥–ª—è Express (express.d.ts)

---

### –ï—Ç–∞–ø 2: –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 2.1 –ú–æ–¥–µ–ª—ñ —Ç–∞ —Å—Ö–µ–º–∏

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ User.model.ts (Mongoose schema)
  - phone (unique, required)
  - password (hashed, required)
  - name, surname, email, birthday, experience, city
  - avatar (URL)
  - isVerified (boolean)
  - createdAt, updatedAt
- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ RefreshToken.model.ts
  - userId (ref to User)
  - token (unique)
  - expiresAt
  - deviceInfo (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

#### 2.2 –£—Ç–∏–ª—ñ—Ç–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

- [ ] jwt.util.ts - –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—è JWT —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] password.util.ts - —Ö–µ—à—É–≤–∞–Ω–Ω—è —Ç–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—ñ–≤ (bcrypt)

#### 2.3 –í–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ Joi/Zod —Å—Ö–µ–º–∏ –¥–ª—è:
  - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É)
  - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–¥—É
  - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
  - –õ–æ–≥—ñ–Ω

#### 2.4 SMS —Å–µ—Ä–≤—ñ—Å

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ sms.service.ts
- [ ] –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ SMS –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–º (Twilio/—ñ–Ω—à–∏–π)
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–∞ –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–¥—ñ–≤ (TTL –¥–ª—è –∫–æ–¥—ñ–≤)

#### 2.5 –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–∏

- [ ] POST `/api/auth/register` - –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (–Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É)
  - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–æ–º–µ—Ä–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è SMS –∫–æ–¥—É
  - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ç–∏–º—á–∞—Å–æ–≤–æ–≥–æ –∫–æ–¥—É (Redis –∞–±–æ MongoDB –∑ TTL)
- [ ] POST `/api/auth/verify-code` - –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è SMS –∫–æ–¥—É
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É
  - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è isVerified = true
- [ ] POST `/api/auth/create-password` - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
  - –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é
  - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è JWT —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] POST `/api/auth/login` - –í—Ö—ñ–¥
  - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–æ–º–µ—Ä—É —Ç–∞ –ø–∞—Ä–æ–ª—é
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–∞—Ä–æ–ª—é
  - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è access + refresh —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] POST `/api/auth/refresh-token` - –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É
  - –í–∞–ª—ñ–¥–∞—Ü—ñ—è refresh —Ç–æ–∫–µ–Ω—É
  - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –Ω–æ–≤–∏—Ö —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] POST `/api/auth/logout` - –í–∏—Ö—ñ–¥
  - –í–∏–¥–∞–ª–µ–Ω–Ω—è refresh —Ç–æ–∫–µ–Ω—É

#### 2.6 Middleware

- [ ] auth.middleware.ts - –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ JWT —Ç–æ–∫–µ–Ω—É
  - –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—É –∑ header
  - –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω—É
  - –î–æ–¥–∞–≤–∞–Ω–Ω—è user –≤ req.user
- [ ] –ó–∞—Ö–∏—Å—Ç —Ä–æ—É—Ç—ñ–≤ middleware

#### 2.7 –ë–µ–∑–ø–µ–∫–∞

- [ ] Rate limiting –¥–ª—è auth —Ä–æ—É—Ç—ñ–≤ (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ brute-force)
- [ ] –û–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ SMS –Ω–∞ –Ω–æ–º–µ—Ä
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
- [ ] Sanitization –¥–∞–Ω–∏—Ö

---

### –ï—Ç–∞–ø 3: –ü—Ä–æ—Ñ—ñ–ª—å —Ç—Ä–µ–Ω–µ—Ä–∞ (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –°–ï–†–ï–î–ù–Ü–ô)

#### 3.1 –ú–æ–¥–µ–ª—å

- [ ] –û–Ω–æ–≤–∏—Ç–∏ User.model.ts (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

#### 3.2 –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–∏

- [ ] GET `/api/user/profile` - –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] PUT `/api/user/profile` - –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] POST `/api/user/avatar` - –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∞–≤–∞—Ç–∞—Ä (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] DELETE `/api/user/account` - –í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç (–∑–∞—Ö–∏—â–µ–Ω–∏–π)

#### 3.3 –í–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] –°—Ö–µ–º–∏ –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–∞–π–ª—ñ–≤ (—Ä–æ–∑–º—ñ—Ä, —Ç–∏–ø)

---

### –ï—Ç–∞–ø 4: –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º–∏ (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 4.1 –ú–æ–¥–µ–ª—å

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ Client.model.ts
  - trainerId (ref to User, required)
  - name, surname, phone (required)
  - connectionMethods: Array<{type, link, icon}>
  - targetAndWishes, stateOfHealth, levelOfPhysical, notes
  - program: Object (reference to Program)
  - parameters: Array<Object>
  - createdAt, updatedAt
  - –Ü–Ω–¥–µ–∫—Å–∏ –¥–ª—è trainerId

#### 4.2 –í–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] –°—Ö–µ–º–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è connectionMethods

#### 4.3 –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–∏

- [ ] GET `/api/clients` - –°–ø–∏—Å–æ–∫ –∫–ª—ñ—î–Ω—Ç—ñ–≤ (–∑–∞—Ö–∏—â–µ–Ω–∏–π, —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó)
  - –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è
  - –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è/–ø–æ—à—É–∫
- [ ] GET `/api/clients/:id` - –î–µ—Ç–∞–ª—ñ –∫–ª—ñ—î–Ω—Ç–∞ (–∑–∞—Ö–∏—â–µ–Ω–∏–π, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞)
- [ ] POST `/api/clients` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] PUT `/api/clients/:id` - –û–Ω–æ–≤–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ (–∑–∞—Ö–∏—â–µ–Ω–∏–π, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞)
- [ ] DELETE `/api/clients/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞ (–∑–∞—Ö–∏—â–µ–Ω–∏–π, –ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞)

#### 4.4 –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–æ—É—Ç–∏

- [ ] PUT `/api/clients/:id/parameters` - –û–Ω–æ–≤–∏—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏
- [ ] PUT `/api/clients/:id/program` - –ü—Ä–∏–∑–Ω–∞—á–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É
- [ ] GET `/api/clients/:id/trainings` - –¢—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞

#### 4.5 –ë–µ–∑–ø–µ–∫–∞

- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞ –∫–ª—ñ—î–Ω—Ç–∞ (middleware –∞–±–æ –≤ —Å–µ—Ä–≤—ñ—Å—ñ)
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö
- [ ] –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ injection –∞—Ç–∞–∫

---

### –ï—Ç–∞–ø 5: –ü—Ä–æ–≥—Ä–∞–º–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –°–ï–†–ï–î–ù–Ü–ô)

#### 5.1 –ú–æ–¥–µ–ª—å

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ Program.model.ts
  - trainerId (ref to User, required)
  - title, description (required)
  - exercises: Array<Object>
  - isTemplate: Boolean
  - createdAt, updatedAt
  - –Ü–Ω–¥–µ–∫—Å–∏ –¥–ª—è trainerId

#### 5.2 –í–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] –°—Ö–µ–º–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–≥—Ä–∞–º–∏

#### 5.3 –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–∏

- [ ] GET `/api/programs` - –°–ø–∏—Å–æ–∫ –ø—Ä–æ–≥—Ä–∞–º (–∑–∞—Ö–∏—â–µ–Ω–∏–π, —Ç—ñ–ª—å–∫–∏ —Å–≤–æ—ó)
- [ ] GET `/api/programs/:id` - –î–µ—Ç–∞–ª—ñ –ø—Ä–æ–≥—Ä–∞–º–∏ (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] POST `/api/programs` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] PUT `/api/programs/:id` - –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] DELETE `/api/programs/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] GET `/api/programs/templates` - –°–ø–∏—Å–æ–∫ —à–∞–±–ª–æ–Ω—ñ–≤
- [ ] POST `/api/programs/:id/clone` - –ö–ª–æ–Ω—É–≤–∞—Ç–∏ –ø—Ä–æ–≥—Ä–∞–º—É

---

### –ï—Ç–∞–ø 6: –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 6.1 –ú–æ–¥–µ–ª—å

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ WorkoutPlan.model.ts
  - trainerId (ref to User, required)
  - clientId (ref to Client, required)
  - trainingName, trainingType, location
  - trainingDate: Array<Date> (–¥–ª—è –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö)
  - occurrences: Array<{
    id: String,
    slotId: String,
    trainingDate: Date
    }>
  - createdAt, updatedAt
  - –Ü–Ω–¥–µ–∫—Å–∏ –¥–ª—è trainerId, clientId, dates

#### 6.2 –í–∞–ª—ñ–¥–∞—Ü—ñ—è

- [ ] –°—Ö–µ–º–∏ –¥–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è/–æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–ª–∞–Ω—É
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞—Ç (–Ω–µ –≤ –º–∏–Ω—É–ª–æ–º—É –¥–ª—è –æ–¥–Ω–æ—Ä–∞–∑–æ–≤–∏—Ö)

#### 6.3 –ö–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∏ —Ç–∞ —Ä–æ—É—Ç–∏

- [ ] GET `/api/workout-plans` - –°–ø–∏—Å–æ–∫ –ø–ª–∞–Ω—ñ–≤ (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
  - Query –ø–∞—Ä–∞–º–µ—Ç—Ä–∏: date, clientId
- [ ] GET `/api/workout-plans/:id` - –î–µ—Ç–∞–ª—ñ –ø–ª–∞–Ω—É (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] POST `/api/workout-plans` - –°—Ç–≤–æ—Ä–∏—Ç–∏ –ø–ª–∞–Ω (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] PUT `/api/workout-plans/:id` - –û–Ω–æ–≤–∏—Ç–∏ –ø–ª–∞–Ω (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] DELETE `/api/workout-plans/:id` - –í–∏–¥–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω (–∑–∞—Ö–∏—â–µ–Ω–∏–π)
- [ ] DELETE `/api/workout-plans/:id/occurrence` - –í–∏–¥–∞–ª–∏—Ç–∏ –æ–∫—Ä–µ–º–µ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è

#### 6.4 –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞

- [ ] –û–±—Ä–æ–±–∫–∞ –ø–æ–≤—Ç–æ—Ä—é–≤–∞–Ω–∏—Ö —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
- [ ] –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è occurrences
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—ñ–≤ —á–∞—Å—É

---

### –ï—Ç–∞–ø 7: –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô)

#### 7.1 API –∫–ª—ñ—î–Ω—Ç –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

- [ ] –°—Ç–≤–æ—Ä–∏—Ç–∏ `client/src/services/api/`
  - `apiClient.ts` - –±–∞–∑–æ–≤–∏–π axios/fetch –∫–ª—ñ—î–Ω—Ç
  - `authService.ts`
  - `clientsService.ts`
  - `workoutPlansService.ts`
  - `programsService.ts`
- [ ] –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ interceptors:
  - –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
  - –û–±—Ä–æ–±–∫–∞ 401 (refresh token)
  - –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

#### 7.2 –ó–∞–º—ñ–Ω–∞ –º–æ–∫—ñ–≤

- [ ] –û–Ω–æ–≤–∏—Ç–∏ `clientsThunk.js` - –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ API
- [ ] –û–Ω–æ–≤–∏—Ç–∏ `workoutPlansThunk.js` - –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–µ–∞–ª—å–Ω—ñ API
- [ ] –î–æ–¥–∞—Ç–∏ auth thunks –¥–ª—è Redux

#### 7.3 –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å—Ç–∞–Ω–æ–º —Ç–∞ –±–µ–∑–ø–µ–∫–∞ –¥–∞–Ω–∏—Ö

- [ ] –û—á–∏—â–µ–Ω–Ω—è Redux store –ø—Ä–∏ –ª–æ–≥–∞—É—Ç—ñ
  - –°—Ç–≤–æ—Ä–∏—Ç–∏ action –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è –≤—Å—ñ—Ö –¥–∞–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –û—á–∏—â–∞—Ç–∏ clients, trainings, programs –ø—Ä–∏ –ª–æ–≥–∞—É—Ç—ñ
  - –ó–∞–ª–∏—à–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –∑–∞–≥–∞–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –∑ —Å–µ—Ä–≤–µ—Ä–æ–º –ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É
  - –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ (–ø—Ä–æ—Ñ—ñ–ª—å) –ø—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –ª–æ–≥—ñ–Ω—É
  - –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Å–ø–∏—Å–æ–∫ –∫–ª—ñ—î–Ω—Ç—ñ–≤ –ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É
  - –ó–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω–Ω—è –ø—ñ—Å–ª—è –ª–æ–≥—ñ–Ω—É
  - –û–Ω–æ–≤–ª—é–≤–∞—Ç–∏ Redux store –∑ –¥–∞–Ω–∏–º–∏ –∑ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö –ø–æ –ø–æ—Ç–æ—á–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
  - –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤—Å—ñ API –∑–∞–ø–∏—Ç–∏ —Ñ—ñ–ª—å—Ç—Ä—É—é—Ç—å –¥–∞–Ω—ñ –ø–æ trainerId
  - –ù–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏, —â–æ –¥–∞–Ω—ñ –Ω–∞–ª–µ–∂–∞—Ç—å –ø–æ—Ç–æ—á–Ω–æ–º—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
  - –î–æ–¥–∞—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø—Ä–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—ñ –¥–∞–Ω–∏—Ö
- [ ] –û–±—Ä–æ–±–∫–∞ –∑–º—ñ–Ω–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
  - –ü—Ä–∏ –ª–æ–≥–∞—É—Ç—ñ - –æ—á–∏—â–∞—Ç–∏ store —Ç–∞ AsyncStorage (–∫—Ä—ñ–º —Ç–æ–∫–µ–Ω—ñ–≤, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
  - –ü—Ä–∏ –ª–æ–≥—ñ–Ω—ñ - –∑–∞–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ —Å–≤—ñ–∂—ñ –¥–∞–Ω—ñ –∑ —Å–µ—Ä–≤–µ—Ä–∞
  - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–∞–ª—ñ–¥–Ω–æ—Å—Ç—ñ —Ç–æ–∫–µ–Ω—ñ–≤ –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ –¥–æ–¥–∞—Ç–∫—É
- [ ] –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —á—É–∂–∏—Ö –¥–∞–Ω–∏—Ö
  - Middleware –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –≤–ª–∞—Å–Ω–∏–∫–∞ –¥–∞–Ω–∏—Ö
  - –í–∞–ª—ñ–¥–∞—Ü—ñ—è –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ –ø–µ—Ä–µ–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è–º
  - –õ–æ–≥—É–≤–∞–Ω–Ω—è —Å–ø—Ä–æ–± –¥–æ—Å—Ç—É–ø—É –¥–æ —á—É–∂–∏—Ö –¥–∞–Ω–∏—Ö

---

### –ï—Ç–∞–ø 8: –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑–ø–µ–∫–∏ (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –í–ò–°–û–ö–ò–ô –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω)

#### 8.1 Middleware –±–µ–∑–ø–µ–∫–∏

- [ ] Helmet –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- [ ] CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ –¥–æ–∑–≤–æ–ª–µ–Ω—ñ –¥–æ–º–µ–Ω–∏)
- [ ] Rate limiting –¥–ª—è –≤—Å—ñ—Ö —Ä–æ—É—Ç—ñ–≤
- [ ] Body parser limits
- [ ] XSS –∑–∞—Ö–∏—Å—Ç
- [ ] SQL/NoSQL injection –∑–∞—Ö–∏—Å—Ç (Mongoose –≤–∂–µ –∑–∞—Ö–∏—â–∞—î, –∞–ª–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏)

#### 8.2 –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

- [ ] –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (error.middleware.ts)
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö (Joi/Zod)
- [ ] Sanitization –¥–∞–Ω–∏—Ö
- [ ] –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –ø–æ–º–∏–ª–∫–∏ (–Ω–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω)

#### 8.3 –õ–æ–≥—É–≤–∞–Ω–Ω—è

- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤
- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
- [ ] –õ–æ–≥—É–≤–∞–Ω–Ω—è –∫—Ä–∏—Ç–∏—á–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (auth, –≤–∏–¥–∞–ª–µ–Ω–Ω—è)
- [ ] –ù–µ –ª–æ–≥—É–≤–∞—Ç–∏ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ (–ø–∞—Ä–æ–ª—ñ, —Ç–æ–∫–µ–Ω–∏)

#### 8.4 –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

- [ ] Health check endpoint
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

---

### –ï—Ç–∞–ø 9: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è (–ü—Ä—ñ–æ—Ä–∏—Ç–µ—Ç: –°–ï–†–ï–î–ù–Ü–ô)

#### 9.1 Unit —Ç–µ—Å—Ç–∏

- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è —É—Ç–∏–ª—ñ—Ç
- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

#### 9.2 Integration —Ç–µ—Å—Ç–∏

- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è API endpoints
- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- [ ] –¢–µ—Å—Ç–∏ –¥–ª—è CRUD –æ–ø–µ—Ä–∞—Ü—ñ–π

#### 9.3 E2E —Ç–µ—Å—Ç–∏

- [ ] –ö—Ä–∏—Ç–∏—á–Ω—ñ —Å—Ü–µ–Ω–∞—Ä—ñ—ó (—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è ‚Üí –ª–æ–≥—ñ–Ω ‚Üí —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞)

---

## üîê –í–∏–º–æ–≥–∏ –±–µ–∑–ø–µ–∫–∏ (–æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω)

### –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è

- ‚úÖ JWT —Ç–æ–∫–µ–Ω–∏ –∑ –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–µ—Ä–º—ñ–Ω–æ–º –¥—ñ—ó (access) —Ç–∞ –¥–æ–≤–≥–∏–º (refresh)
- ‚úÖ –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤ (bcrypt, –º—ñ–Ω—ñ–º—É–º 10 rounds)
- ‚úÖ Rate limiting –¥–ª—è auth endpoints
- ‚úÖ –û–±–º–µ–∂–µ–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Å—Ç—ñ SMS –Ω–∞ –Ω–æ–º–µ—Ä
- ‚úÖ TTL –¥–ª—è –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ sanitization –≤—Å—ñ—Ö –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤–ª–∞—Å–Ω–∏–∫–∞ —Ä–µ—Å—É—Ä—Å—É (–∫–ª—ñ—î–Ω—Ç–∏, –ø—Ä–æ–≥—Ä–∞–º–∏, –ø–ª–∞–Ω–∏)
- ‚úÖ Middleware –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É —Ä–æ—É—Ç—ñ–≤
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è refresh —Ç–æ–∫–µ–Ω—ñ–≤

### –ó–∞—Ö–∏—Å—Ç –¥–∞–Ω–∏—Ö

- ‚úÖ HTTPS –≤ –ø—Ä–æ–¥–∞–∫—à–Ω (–æ–±–æ–≤'—è–∑–∫–æ–≤–æ)
- ‚úÖ Helmet –¥–ª—è –∑–∞—Ö–∏—Å—Ç—É –∑–∞–≥–æ–ª–æ–≤–∫—ñ–≤
- ‚úÖ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ç–∞ sanitization
- ‚úÖ –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ injection (Mongoose –∑–∞—Ö–∏—â–∞—î, –∞–ª–µ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏)
- ‚úÖ –ù–µ –ª–æ–≥—É–≤–∞—Ç–∏ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ

### –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫

- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∞ –æ–±—Ä–æ–±–∫–∞
- ‚úÖ –ù–µ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ –¥–µ—Ç–∞–ª—ñ –ø–æ–º–∏–ª–æ–∫ –≤ –ø—Ä–æ–¥–∞–∫—à–Ω
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ

---

## üìä –ú–æ–¥–µ–ª—ñ –¥–∞–Ω–∏—Ö (Mongoose Schemas)

### User

```typescript
{
  _id: ObjectId,
  phone: String (unique, required, index),
  password: String (hashed, required),
  name: String,
  surname: String,
  email: String,
  birthday: Date,
  experience: String,
  city: String,
  avatar: String,
  isVerified: Boolean (default: false),
  createdAt: Date,
  updatedAt: Date
}
```

### Client

```typescript
{
  _id: ObjectId,
  trainerId: ObjectId (ref: User, required, index),
  name: String (required),
  surname: String (required),
  phone: String (required),
  connectionMethods: [{
    type: String,
    link: String,
    icon: String
  }],
  targetAndWishes: String,
  stateOfHealth: String,
  levelOfPhysical: String,
  notes: String,
  program: {
    id: ObjectId (ref: Program),
    title: String,
    program: Object
  },
  parameters: [Object],
  createdAt: Date,
  updatedAt: Date
}
```

### Program

```typescript
{
  _id: ObjectId,
  trainerId: ObjectId (ref: User, required, index),
  title: String (required),
  description: String,
  exercises: [Object],
  isTemplate: Boolean (default: false),
  createdAt: Date,
  updatedAt: Date
}
```

### WorkoutPlan

```typescript
{
  _id: ObjectId,
  trainerId: ObjectId (ref: User, required, index),
  clientId: ObjectId (ref: Client, required, index),
  trainingName: String (required),
  trainingType: String,
  location: String,
  trainingDate: [Date] (index),
  occurrences: [{
    id: String,
    slotId: String,
    trainingDate: Date (index)
  }],
  createdAt: Date,
  updatedAt: Date
}
```

### RefreshToken

```typescript
{
  _id: ObjectId,
  userId: ObjectId (ref: User, required, index),
  token: String (unique, required),
  expiresAt: Date (required, index with TTL),
  deviceInfo: String,
  createdAt: Date
}
```

---

## üöÄ –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π –ø–æ—Ä—è–¥–æ–∫ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

### –§–∞–∑–∞ 1: MVP (–ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª)

1. **–ï—Ç–∞–ø 1** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —ñ–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∏
2. **–ï—Ç–∞–ø 2** - –ê—É—Ç–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è —Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
3. **–ï—Ç–∞–ø 4** - –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç–∞–º–∏ (–±–∞–∑–æ–≤—ñ CRUD)
4. **–ï—Ç–∞–ø 7.1** - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API –∫–ª—ñ—î–Ω—Ç–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ

### –§–∞–∑–∞ 2: –û—Å–Ω–æ–≤–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

5. **–ï—Ç–∞–ø 6** - –ü–ª–∞–Ω—É–≤–∞–Ω–Ω—è —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
6. **–ï—Ç–∞–ø 7.2** - –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º
7. **–ï—Ç–∞–ø 8** - –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑–ø–µ–∫–∏

### –§–∞–∑–∞ 3: –†–æ–∑—à–∏—Ä–µ–Ω–∏–π —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª

8. **–ï—Ç–∞–ø 3** - –ü—Ä–æ—Ñ—ñ–ª—å —Ç—Ä–µ–Ω–µ—Ä–∞
9. **–ï—Ç–∞–ø 5** - –ü—Ä–æ–≥—Ä–∞–º–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å
10. **–ï—Ç–∞–ø 9** - –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

- –í—Å—ñ –¥–∞—Ç–∏ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤ UTC, –∫–æ–Ω–≤–µ—Ä—Ç—É–≤–∞—Ç–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥—ñ
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ ObjectId MongoDB –¥–ª—è ID
- –õ–æ–≥—É–≤–∞—Ç–∏ –≤—Å—ñ –∫—Ä–∏—Ç–∏—á–Ω—ñ –æ–ø–µ—Ä–∞—Ü—ñ—ó (–∞–ª–µ –Ω–µ —á—É—Ç–ª–∏–≤—ñ –¥–∞–Ω—ñ)
- –í–µ—Ä—Å—ñ–æ–Ω—É–≤–∞–Ω–Ω—è API (`/api/v1/...`)
- –î–æ–∫—É–º–µ–Ω—Ç—É–≤–∞—Ç–∏ API (Swagger/OpenAPI - –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
- Environment-based –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (dev, staging, production)
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ transactions –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –æ–ø–µ—Ä–∞—Ü—ñ–π (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

---

# –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç —Å–µ—Ä–≤–µ—Ä–∞

# üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Auth

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø—Ü—ñ `server/` –∑ —Ç–∞–∫–∏–º –≤–º—ñ—Å—Ç–æ–º:

```env
NODE_ENV=development
PORT=3000
MONGODB_URI=mongodb://localhost:27017/smartcoach
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-for-security
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
CORS_ORIGIN=http://localhost:3000,http://10.0.2.2:3000,http://127.0.0.1:3000
LOG_LEVEL=info
```

**–í–∞–∂–ª–∏–≤–æ:** –ó–º—ñ–Ω—ñ—Ç—å `JWT_SECRET` –Ω–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏!

---

## –ö—Ä–æ–∫ 2: –ó–∞–ø—É—Å—Ç—ñ—Ç—å MongoDB

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ MongoDB –∑–∞–ø—É—â–µ–Ω–∏–π:

```bash
# macOS (Homebrew)
brew services start mongodb-community

# –ê–±–æ –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å
brew services list | grep mongodb
```

---

## –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
cd server
npm run dev
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://localhost:3000`

---

## –ö—Ä–æ–∫ 4: –ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ endpoints

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –≥–æ—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç

```bash
cd server
./test-auth.sh
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –ü–æ—Ç—Ä—ñ–±–µ–Ω `jq` –¥–ª—è —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è JSON. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å —á–µ—Ä–µ–∑:

```bash
# macOS
brew install jq

# Linux
sudo apt-get install jq
```

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ cURL –≤—Ä—É—á–Ω—É

#### 1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è

```bash
curl -X POST http://localhost:3000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567"}'
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** –ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –±—É–¥–µ –≤–∏–≤–µ–¥–µ–Ω–∏–π –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏–π –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ (development —Ä–µ–∂–∏–º).

#### 2. –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–¥—É

```bash
curl -X POST http://localhost:3000/api/v1/auth/verify-code \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567", "code": "123456"}'
```

#### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

```bash
curl -X POST http://localhost:3000/api/v1/auth/create-password \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "MySecure123",
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ"
  }'
```

**–ó–±–µ—Ä–µ–∂—ñ—Ç—å `access` —Ç–∞ `refresh` —Ç–æ–∫–µ–Ω–∏ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!**

#### 4. –õ–æ–≥—ñ–Ω

```bash
curl -X POST http://localhost:3000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "MySecure123"
  }'
```

#### 5. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É

```bash
curl -X POST http://localhost:3000/api/v1/auth/refresh-token \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "YOUR_REFRESH_TOKEN_HERE"}'
```

#### 6. –í–∏—Ö—ñ–¥

```bash
curl -X POST http://localhost:3000/api/v1/auth/logout \
  -H "Content-Type: application/json" \
  -d '{"refreshToken": "YOUR_REFRESH_TOKEN_HERE"}'
```

---

## –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ MongoDB

```bash
mongosh mongodb://localhost:27017/smartcoach
```

```javascript
// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
db.users.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ refresh —Ç–æ–∫–µ–Ω—ñ–≤
db.refreshtokens.find().pretty();
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç

- [ ] MongoDB –∑–∞–ø—É—â–µ–Ω–∏–π
- [ ] .env —Ñ–∞–π–ª —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º–∏ –∑–Ω–∞—á–µ–Ω–Ω—è–º–∏
- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π –±–µ–∑ –ø–æ–º–∏–ª–æ–∫
- [ ] Health check –ø—Ä–∞—Ü—é—î: `curl http://localhost:3000/health`
- [ ] –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (–∫–æ–¥ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å)
- [ ] –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é –ø—Ä–∞—Ü—é—î (—Ç–æ–∫–µ–Ω–∏ –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è)
- [ ] –õ–æ–≥—ñ–Ω –ø—Ä–∞—Ü—é—î

---

## üìö –î–µ—Ç–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

–î–ª—è –¥–µ—Ç–∞–ª—å–Ω—ñ—à–æ—ó —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –¥–∏–≤—ñ—Ç—å—Å—è:

- [TESTING_AUTH.md](./TESTING_AUTH.md) - –ø–æ–≤–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- [README.md](./README.md) - –∑–∞–≥–∞–ª—å–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

---

## ‚ö†Ô∏è –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### "MongoDB –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ"

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞–ø—É—Å—Ç—ñ—Ç—å MongoDB:

```bash
brew services start mongodb-community
```

### "JWT_SECRET –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏"

**–†—ñ—à–µ–Ω–Ω—è:** –ó–º—ñ–Ω—ñ—Ç—å `JWT_SECRET` –≤ `.env` –Ω–∞ —Ä—è–¥–æ–∫ >= 32 —Å–∏–º–≤–æ–ª–∏

### "–ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó env –∑–º—ñ–Ω–Ω–∏—Ö"

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ –∑–º—ñ–Ω–Ω—ñ –≤ `.env` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### Rate limiting –ø–æ–º–∏–ª–∫–∏

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞—á–µ–∫–∞–π—Ç–µ 15 —Ö–≤–∏–ª–∏–Ω –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

---

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB Atlas

## –§–æ—Ä–º–∞—Ç connection string:

```
mongodb+srv://karataievpro_db_user:–¢–í–Ü–ô_–ü–ê–†–û–õ–¨@cluster0.qyajcxv.mongodb.net/smartcoach?retryWrites=true&w=majority&appName=Cluster0
```

## –ö—Ä–æ–∫–∏:

1. **–ó–∞–º—ñ–Ω–∏ `<db_password>` –Ω–∞ —Å–≤—ñ–π —Ä–µ–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å** –≤—ñ–¥ MongoDB Atlas

2. **–î–æ–¥–∞–π –Ω–∞–∑–≤—É –±–∞–∑–∏ –¥–∞–Ω–∏—Ö** (`smartcoach`) –ø—ñ—Å–ª—è `.net/`

3. **–í—ñ–¥—Ä–µ–¥–∞–≥—É–π `.env` —Ñ–∞–π–ª:**

```env
MONGODB_URI=mongodb+srv://karataievpro_db_user:–¢–í–Ü–ô_–ü–ê–†–û–õ–¨@cluster0.qyajcxv.mongodb.net/smartcoach?retryWrites=true&w=majority&appName=Cluster0
```

## –ü—Ä–∏–∫–ª–∞–¥ –ø–æ–≤–Ω–æ–≥–æ .env:

```env
NODE_ENV=development
PORT=3000
MONGODB_URI=mongodb+srv://karataievpro_db_user:–¢–í–Ü–ô_–ü–ê–†–û–õ–¨@cluster0.qyajcxv.mongodb.net/smartcoach?retryWrites=true&w=majority&appName=Cluster0
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-for-testing
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
CORS_ORIGIN=http://localhost:3000
LOG_LEVEL=info
```

## –í–∞–∂–ª–∏–≤–æ:

- ‚úÖ –ó–∞–º—ñ–Ω–∏ `–¢–í–Ü–ô_–ü–ê–†–û–õ–¨` –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –ø–∞—Ä–æ–ª—å
- ‚úÖ –ù–∞–∑–≤–∞ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö (`smartcoach`) –±—É–¥–µ —Å—Ç–≤–æ—Ä–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—Ä–∏ –ø–µ—Ä—à–æ–º—É –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—ñ
- ‚úÖ –Ø–∫—â–æ –ø–∞—Ä–æ–ª—å –º—ñ—Å—Ç–∏—Ç—å —Å–ø–µ—Ü—ñ–∞–ª—å–Ω—ñ —Å–∏–º–≤–æ–ª–∏ (@, #, $, —Ç–æ—â–æ), –∑–∞–∫–æ–¥—É–π —ó—Ö —á–µ—Ä–µ–∑ URL encoding:
  - `@` ‚Üí `%40`
  - `#` ‚Üí `%23`
  - `$` ‚Üí `%24`
  - `%` ‚Üí `%25`

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:

–ü—ñ—Å–ª—è –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–∞–ø—É—Å—Ç–∏:

```bash
npm run dev
```

–Ø–∫—â–æ –≤—Å–µ –û–ö, –ø–æ–±–∞—á–∏—à –≤ –∫–æ–Ω—Å–æ–ª—ñ:

```
‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ MongoDB
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
```

---

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Auth

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è Auth Endpoints

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. **MongoDB** –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–π
2. **.env —Ñ–∞–π–ª** –º–∞—î –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑ –Ω–µ–æ–±—Ö—ñ–¥–Ω–∏–º–∏ –∑–º—ñ–Ω–Ω–∏–º–∏
3. **Node.js** –≤–µ—Ä—Å—ñ—è >= 18.0.0

---

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### 1. –°—Ç–≤–æ—Ä—ñ—Ç—å .env —Ñ–∞–π–ª

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` –≤ –ø–∞–ø—Ü—ñ `server/` –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –≤–º—ñ—Å—Ç–æ–º:

```env
# Server
NODE_ENV=development
PORT=3000

# MongoDB
MONGODB_URI=mongodb://localhost:27017/smartcoach

# JWT
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-for-security
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d

# SMS (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ –¥–ª—è development)
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=

# Rate Limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:3000

# Logging
LOG_LEVEL=info
```

**–í–∞–∂–ª–∏–≤–æ:**

- `JWT_SECRET` –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏
- `MONGODB_URI` - –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à connection string
- Twilio –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –Ω–µ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –¥–ª—è development (–±—É–¥–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏—Å—å mock —Ä–µ–∂–∏–º)

---

## üöÄ –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

### Development —Ä–µ–∂–∏–º (–∑ auto-reload):

```bash
cd server
npm run dev
```

### Production —Ä–µ–∂–∏–º:

```bash
cd server
npm run build
npm start
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://localhost:3000`

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ cURL

### 1. Health Check

```bash
curl http://localhost:3000/health
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2024-01-01T12:00:00.000Z"
}
```

---

### 2. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (–≤—ñ–¥–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥—É)

```bash
curl -X POST http://localhost:3000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (development):**

```json
{
  "success": true,
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ",
  "code": "123456"
}
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í development —Ä–µ–∂–∏–º—ñ –∫–æ–¥ –±—É–¥–µ –≤–∏–≤–µ–¥–µ–Ω–∏–π –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏–π –≤ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

---

### 3. –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è SMS –∫–æ–¥—É

```bash
curl -X POST http://localhost:3000/api/v1/auth/verify-code \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "code": "123456"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ",
  "verified": true
}
```

---

### 4. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

```bash
curl -X POST http://localhost:3000/api/v1/auth/create-password \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "MySecure123",
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–ü–∞—Ä–æ–ª—å —Å—Ç–≤–æ—Ä–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ",
  "tokens": {
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "user": {
    "id": "507f1f77bcf86cd799439011",
    "phone": "+380501234567",
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com",
    "isVerified": true
  }
}
```

**–ó–±–µ—Ä–µ–∂—ñ—Ç—å `access` —Ç–∞ `refresh` —Ç–æ–∫–µ–Ω–∏ –¥–ª—è –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤!**

---

### 5. –õ–æ–≥—ñ–Ω

```bash
curl -X POST http://localhost:3000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "MySecure123"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–í—Ö—ñ–¥ –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ",
  "tokens": {
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  },
  "user": {
    "id": "507f1f77bcf86cd799439011",
    "phone": "+380501234567",
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com",
    "isVerified": true
  }
}
```

---

### 6. –û–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É (Refresh Token)

```bash
curl -X POST http://localhost:3000/api/v1/auth/refresh-token \
  -H "Content-Type: application/json" \
  -d '{
    "refreshToken": "YOUR_REFRESH_TOKEN_HERE"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–¢–æ–∫–µ–Ω–∏ –æ–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ",
  "tokens": {
    "access": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
    "refresh": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

---

### 7. –í–∏—Ö—ñ–¥ (Logout)

```bash
curl -X POST http://localhost:3000/api/v1/auth/logout \
  -H "Content-Type: application/json" \
  -d '{
    "refreshToken": "YOUR_REFRESH_TOKEN_HERE"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–í–∏—Ö—ñ–¥ –≤–∏–∫–æ–Ω–∞–Ω–æ —É—Å–ø—ñ—à–Ω–æ"
}
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Postman

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Postman

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π Collection: "SmartCoach Auth"
2. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É `baseUrl` = `http://localhost:3000`
3. –î–æ–¥–∞–π—Ç–µ –∑–º—ñ–Ω–Ω—É `accessToken` (–±—É–¥–µ –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏—Å—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ)

### –°—Ç–≤–æ—Ä—ñ—Ç—å –∑–∞–ø–∏—Ç–∏:

#### 1. Register

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/register`
- **Body (raw JSON):**

```json
{
  "phone": "+380501234567"
}
```

#### 2. Verify Code

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/verify-code`
- **Body (raw JSON):**

```json
{
  "phone": "+380501234567",
  "code": "123456"
}
```

#### 3. Create Password

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/create-password`
- **Body (raw JSON):**

```json
{
  "phone": "+380501234567",
  "password": "MySecure123",
  "name": "–Ü–≤–∞–Ω",
  "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ"
}
```

- **Tests (–¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤):**

```javascript
if (pm.response.code === 201) {
  const jsonData = pm.response.json();
  pm.environment.set('accessToken', jsonData.tokens.access);
  pm.environment.set('refreshToken', jsonData.tokens.refresh);
}
```

#### 4. Login

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/login`
- **Body (raw JSON):**

```json
{
  "phone": "+380501234567",
  "password": "MySecure123"
}
```

#### 5. Refresh Token

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/refresh-token`
- **Body (raw JSON):**

```json
{
  "refreshToken": "{{refreshToken}}"
}
```

#### 6. Logout

- **Method:** POST
- **URL:** `{{baseUrl}}/api/v1/auth/logout`
- **Body (raw JSON):**

```json
{
  "refreshToken": "{{refreshToken}}"
}
```

---

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫

### 1. –ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É

```bash
curl -X POST http://localhost:3000/api/v1/auth/register \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "123"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (400):**

```json
{
  "success": false,
  "message": "–ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö",
  "errors": [
    {
      "field": "phone",
      "message": "–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É"
    }
  ]
}
```

### 2. –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

```bash
curl -X POST http://localhost:3000/api/v1/auth/verify-code \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "code": "000000"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (400):**

```json
{
  "success": false,
  "message": "–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó"
}
```

### 3. –ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å –ø—Ä–∏ –ª–æ–≥—ñ–Ω—ñ

```bash
curl -X POST http://localhost:3000/api/v1/auth/login \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "WrongPassword123"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (401):**

```json
{
  "success": false,
  "message": "–ù–µ–≤—ñ—Ä–Ω–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –∞–±–æ –ø–∞—Ä–æ–ª—å"
}
```

### 4. –ó–∞–ø–∏—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω—É (–¥–ª—è –∑–∞—Ö–∏—â–µ–Ω–∏—Ö endpoints)

```bash
curl -X GET http://localhost:3000/api/v1/user/profile
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (401):**

```json
{
  "success": false,
  "message": "–¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É –Ω–µ –Ω–∞–¥–∞–Ω–æ. –î–æ–¥–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization: Bearer <token>"
}
```

---

## üìù –ü–æ–≤–Ω–∏–π Flow —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –°—Ü–µ–Ω–∞—Ä—ñ–π 1: –ü–æ–≤–Ω–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

1. **Register** ‚Üí –æ—Ç—Ä–∏–º–∞–π—Ç–µ SMS –∫–æ–¥
2. **Verify Code** ‚Üí –ø—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –∫–æ–¥
3. **Create Password** ‚Üí —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å —Ç–∞ –æ—Ç—Ä–∏–º–∞–π—Ç–µ —Ç–æ–∫–µ–Ω–∏
4. **Login** ‚Üí —É–≤—ñ–π–¥—ñ—Ç—å –∑ –ø–∞—Ä–æ–ª–µ–º
5. **Refresh Token** ‚Üí –æ–Ω–æ–≤—ñ—Ç—å —Ç–æ–∫–µ–Ω–∏
6. **Logout** ‚Üí –≤–∏–π–¥—ñ—Ç—å –∑ —Å–∏—Å—Ç–µ–º–∏

### –°—Ü–µ–Ω–∞—Ä—ñ–π 2: –õ–æ–≥—ñ–Ω —ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

1. **Login** ‚Üí —É–≤—ñ–π–¥—ñ—Ç—å –∑ —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º —Ç–∞ –ø–∞—Ä–æ–ª–µ–º
2. **Refresh Token** ‚Üí –æ–Ω–æ–≤—ñ—Ç—å —Ç–æ–∫–µ–Ω–∏
3. **Logout** ‚Üí –≤–∏–π–¥—ñ—Ç—å

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ MongoDB

–ü—ñ—Å–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–∞–Ω—ñ –≤ MongoDB:

```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB
mongosh mongodb://localhost:27017/smartcoach

# –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
db.users.find().pretty()

# –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.find().pretty()

# –ü–µ—Ä–µ–≥–ª—è–¥ refresh —Ç–æ–∫–µ–Ω—ñ–≤
db.refreshtokens.find().pretty()
```

---

## ‚ö†Ô∏è –¢–∏–ø–æ–≤—ñ –ø–æ–º–∏–ª–∫–∏

### 1. "MongoDB –≤—ñ–¥–∫–ª—é—á–µ–Ω–æ"

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ MongoDB –∑–∞–ø—É—â–µ–Ω–∏–π:

```bash
# macOS (Homebrew)
brew services start mongodb-community

# Linux
sudo systemctl start mongod
```

### 2. "JWT_SECRET –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏"

**–†—ñ—à–µ–Ω–Ω—è:** –ó–º—ñ–Ω—ñ—Ç—å `JWT_SECRET` –≤ `.env` –Ω–∞ —Ä—è–¥–æ–∫ –¥–æ–≤–∂–∏–Ω–æ—é >= 32 —Å–∏–º–≤–æ–ª–∏

### 3. "–ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó env –∑–º—ñ–Ω–Ω–∏—Ö"

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –≤—Å—ñ –æ–±–æ–≤'—è–∑–∫–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ –≤ `.env` –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ

### 4. Rate limiting –ø–æ–º–∏–ª–∫–∏

**–†—ñ—à–µ–Ω–Ω—è:** –ó–∞—á–µ–∫–∞–π—Ç–µ 15 —Ö–≤–∏–ª–∏–Ω –∞–±–æ –∑–º—ñ–Ω—ñ—Ç—å IP –∞–¥—Ä–µ—Å—É

---

## üéØ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- [ ] Health check –ø—Ä–∞—Ü—é—î
- [ ] –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î SMS –∫–æ–¥ (–≤ development - –≤–∏–≤–æ–¥–∏—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—å)
- [ ] –í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–¥—É –ø—Ä–∞—Ü—é—î
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é –≥–µ–Ω–µ—Ä—É—î —Ç–æ–∫–µ–Ω–∏
- [ ] –õ–æ–≥—ñ–Ω –ø—Ä–∞—Ü—é—î –∑ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–º –ø–∞—Ä–æ–ª–µ–º
- [ ] –õ–æ–≥—ñ–Ω –Ω–µ –ø—Ä–∞—Ü—é—î –∑ –Ω–µ–≤—ñ—Ä–Ω–∏–º –ø–∞—Ä–æ–ª–µ–º
- [ ] Refresh token –æ–Ω–æ–≤–ª—é—î —Ç–æ–∫–µ–Ω–∏
- [ ] Logout –≤–∏–¥–∞–ª—è—î refresh token
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î (–Ω–µ–≤—ñ—Ä–Ω—ñ –¥–∞–Ω—ñ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å –ø–æ–º–∏–ª–∫–∏)
- [ ] Rate limiting –ø—Ä–∞—Ü—é—î (–ø—ñ—Å–ª—è –±–∞–≥–∞—Ç—å–æ—Ö –∑–∞–ø–∏—Ç—ñ–≤)

---

## üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ—Å—É—Ä—Å–∏

- [MongoDB Setup Guide](./MONGODB_SETUP.md)
- [API Documentation](./README.md)

---

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è User Profile

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è User Profile API

## –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Ç–µ—Å—Ç–æ–≤–∏–π —Å–∫—Ä–∏–ø—Ç:

```bash
cd server
./test-user-profile.sh
```

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:

- –ó–∞–ª–æ–≥—ñ–Ω—É—î—Ç—å—Å—è (–∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—î –Ω–∞–¥–∞–Ω–∏–π —Ç–æ–∫–µ–Ω)
- –ü—Ä–æ—Ç–µ—Å—Ç—É—î –≤—Å—ñ endpoints
- –ü–æ–∫–∞–∂–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

–ê–±–æ –∑ –Ω–∞–¥–∞–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º:

```bash
./test-user-profile.sh "your_access_token_here"
```

### 2. –†—É—á–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

#### –ö—Ä–æ–∫ 1: –û—Ç—Ä–∏–º–∞—Ç–∏ —Ç–æ–∫–µ–Ω

–°–ø–æ—á–∞—Ç–∫—É –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ª–æ–≥—ñ–Ω–∏—Ç–∏—Å—è –∞–±–æ –∑–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è:

```bash
# –õ–æ–≥—ñ–Ω
curl -X POST "http://localhost:3000/api/v1/auth/login" \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "MySecure123"
  }'
```

–ó–±–µ—Ä–µ–∂—ñ—Ç—å `access` —Ç–æ–∫–µ–Ω –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ.

#### –ö—Ä–æ–∫ 2: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è endpoints

**GET /api/user/profile** - –û—Ç—Ä–∏–º–∞—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å

```bash
curl -X GET "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json"
```

**PUT /api/user/profile** - –û–Ω–æ–≤–∏—Ç–∏ –ø—Ä–æ—Ñ—ñ–ª—å

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com",
    "birthday": "1990-05-15T00:00:00.000Z",
    "experience": "5 —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É",
    "city": "–ö–∏—ó–≤",
    "avatar": "https://example.com/avatar.jpg"
  }'
```

**–ß–∞—Å—Ç–∫–æ–≤–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è** (—Ç—ñ–ª—å–∫–∏ name):

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä"
  }'
```

**–û—á–∏—â–µ–Ω–Ω—è –ø–æ–ª—è** (–ø–æ—Ä–æ–∂–Ω—ñ–π —Ä—è–¥–æ–∫):

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "avatar": ""
  }'
```

**DELETE /api/user/account** - –í–∏–¥–∞–ª–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç

‚ö†Ô∏è **–£–í–ê–ì–ê**: –¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ–∑–≤–æ—Ä–æ—Ç–Ω–∞!

```bash
curl -X DELETE "http://localhost:3000/api/v1/user/account" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json"
```

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### –ù–µ–≤—ñ—Ä–Ω–∏–π email

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "email": "invalid-email"
  }'
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `400 Bad Request` –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –Ω–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email.

### –î–∞—Ç–∞ –≤ –º–∞–π–±—É—Ç–Ω—å–æ–º—É

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "birthday": "2030-01-01T00:00:00.000Z"
  }'
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `400 Bad Request` –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –Ω–µ–≤—ñ—Ä–Ω—É –¥–∞—Ç—É.

### –ó–∞–Ω–∞–¥—Ç–æ –¥–æ–≤–≥–µ —ñ–º'—è

```bash
curl -X PUT "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ê" * 100
  }'
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `400 Bad Request` –∑ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è–º –ø—Ä–æ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—É.

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑–ø–µ–∫–∏

### –ó–∞–ø–∏—Ç –±–µ–∑ —Ç–æ–∫–µ–Ω—É

```bash
curl -X GET "http://localhost:3000/api/v1/user/profile" \
  -H "Content-Type: application/json"
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `401 Unauthorized`

### –ó–∞–ø–∏—Ç –∑ –Ω–µ–≤—ñ—Ä–Ω–∏–º —Ç–æ–∫–µ–Ω–æ–º

```bash
curl -X GET "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer invalid_token" \
  -H "Content-Type: application/json"
```

–û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç: `401 Unauthorized`

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π

### –£—Å–ø—ñ—à–Ω–µ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

```json
{
  "success": true,
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "phone": "+380501234567",
    "name": "–Ü–≤–∞–Ω",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com",
    "birthday": "1990-05-15T00:00:00.000Z",
    "experience": "5 —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É",
    "city": "–ö–∏—ó–≤",
    "avatar": "https://example.com/avatar.jpg",
    "isVerified": true,
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T00:00:00.000Z"
  }
}
```

### –£—Å–ø—ñ—à–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é

```json
{
  "success": true,
  "message": "–ü—Ä–æ—Ñ—ñ–ª—å –æ–Ω–æ–≤–ª–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ",
  "data": {
    "id": "507f1f77bcf86cd799439011",
    "phone": "+380501234567",
    "name": "–û–ª–µ–∫—Å–∞–Ω–¥—Ä",
    "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
    "email": "ivan@example.com",
    "birthday": "1990-05-15T00:00:00.000Z",
    "experience": "5 —Ä–æ–∫—ñ–≤ –¥–æ—Å–≤—ñ–¥—É",
    "city": "–ö–∏—ó–≤",
    "avatar": null,
    "isVerified": true,
    "createdAt": "2024-01-01T00:00:00.000Z",
    "updatedAt": "2024-01-01T12:00:00.000Z"
  }
}
```

### –ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

```json
{
  "success": false,
  "message": "–ü–æ–º–∏–ª–∫–∞ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó",
  "errors": [
    {
      "field": "email",
      "message": "–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email"
    }
  ]
}
```

### –ü–æ–º–∏–ª–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

```json
{
  "success": false,
  "message": "–¢–æ–∫–µ–Ω –¥–æ—Å—Ç—É–ø—É –Ω–µ –Ω–∞–¥–∞–Ω–æ. –î–æ–¥–∞–π—Ç–µ –∑–∞–≥–æ–ª–æ–≤–æ–∫ Authorization: Bearer <token>"
}
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –∑ jq –¥–ª—è –∫—Ä–∞—Å–∏–≤–æ–≥–æ –≤–∏–≤–æ–¥—É

–Ø–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ `jq`, –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ `| jq .` –¥–æ curl –∫–æ–º–∞–Ω–¥:

```bash
curl -X GET "http://localhost:3000/api/v1/user/profile" \
  -H "Authorization: Bearer YOUR_ACCESS_TOKEN" \
  -H "Content-Type: application/json" | jq .
```

## –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Postman

1. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç
2. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –º–µ—Ç–æ–¥ (GET, PUT, DELETE)
3. URL: `http://localhost:3000/api/v1/user/profile`
4. –í–∫–ª–∞–¥–∫–∞ "Headers":
   - `Authorization`: `Bearer YOUR_ACCESS_TOKEN`
   - `Content-Type`: `application/json`
5. –î–ª—è PUT –∑–∞–ø–∏—Ç—ñ–≤ - –≤–∫–ª–∞–¥–∫–∞ "Body" ‚Üí "raw" ‚Üí "JSON":

```json
{
  "name": "–Ü–≤–∞–Ω",
  "surname": "–ü–µ—Ç—Ä–µ–Ω–∫–æ",
  "email": "ivan@example.com"
}
```

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–ü—ñ–¥ —á–∞—Å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è –¥—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:

```bash
# –Ø–∫—â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ —á–µ—Ä–µ–∑ npm run dev
# –õ–æ–≥–∏ –±—É–¥—É—Ç—å –≤–∏–≤–æ–¥–∏—Ç–∏—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å
```

–õ–æ–≥–∏ –º—ñ—Å—Ç—è—Ç—å:

- –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—é –ø—Ä–æ –∑–∞–ø–∏—Ç–∏
- –ü–æ–º–∏–ª–∫–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- –û–ø–µ—Ä–∞—Ü—ñ—ó –æ–Ω–æ–≤–ª–µ–Ω–Ω—è –ø—Ä–æ—Ñ—ñ–ª—é
- –í–∏–¥–∞–ª–µ–Ω–Ω—è –∞–∫–∞—É–Ω—Ç—ñ–≤

---

# –ó–∞–≥–∞–ª—å–Ω–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

# –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ—Ç–æ—á–Ω–æ–≥–æ –ø—Ä–æ–≥—Ä–µ—Å—É

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env —Ñ–∞–π–ª—É

–°–∫–æ–ø—ñ—é–π `.env.example` –≤ `.env` —Ç–∞ –∑–∞–ø–æ–≤–Ω–∏ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

```bash
cd server
cp .env.example .env
```

**–ú—ñ–Ω—ñ–º–∞–ª—å–Ω—ñ –∑–º—ñ–Ω–Ω—ñ –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:**

```env
NODE_ENV=development
PORT=3000
MONGODB_URI=mongodb://localhost:27017/smartcoach
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-for-testing
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
CORS_ORIGIN=http://localhost:3000
LOG_LEVEL=info
```

> **–ü—Ä–∏–º—ñ—Ç–∫–∞:** –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –±–µ–∑ —Ä–µ–∞–ª—å–Ω–æ—ó –ë–î –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ MongoDB Atlas (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–∏–π) –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB.

## –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–º–ø—ñ–ª—è—Ü—ñ—ó TypeScript

```bash
npm run build
```

–Ø–∫—â–æ –≤—Å–µ –û–ö - –ø–æ–±–∞—á–∏—à –ø–∞–ø–∫—É `dist/` –∑ —Å–∫–æ–º–ø—ñ–ª—å–æ–≤–∞–Ω–∏–º–∏ —Ñ–∞–π–ª–∞–º–∏.

## –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª—ñ–Ω—Ç–µ—Ä–∞

```bash
npm run lint
```

–Ø–∫—â–æ —î –ø–æ–º–∏–ª–∫–∏ - –≤–∏–ø—Ä–∞–≤ —ó—Ö –∞–±–æ –∑–∞–ø—É—Å—Ç–∏:

```bash
npm run lint:fix
```

## –ö—Ä–æ–∫ 4: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

### –í–∞—Ä—ñ–∞–Ω—Ç A: Development —Ä–µ–∂–∏–º (–∑ auto-reload)

```bash
npm run dev
```

### –í–∞—Ä—ñ–∞–Ω—Ç B: Production —Ä–µ–∂–∏–º

```bash
npm run build
npm start
```

## –ö—Ä–æ–∫ 5: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è endpoints

### Health Check

–í—ñ–¥–∫—Ä–∏–π –±—Ä–∞—É–∑–µ—Ä –∞–±–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–π curl:

```bash
curl http://localhost:3000/health
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2024-11-19T12:00:00.000Z"
}
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–º–∏–ª–æ–∫ (404)

```bash
curl http://localhost:3000/api/nonexistent
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": false,
  "message": "–ú–∞—Ä—à—Ä—É—Ç GET /api/nonexistent –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ"
}
```

## –ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤

–ü—Ä–∏ –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞ –≤ –∫–æ–Ω—Å–æ–ª—ñ –º–∞—î—à –ø–æ–±–∞—á–∏—Ç–∏:

```
‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–æ –¥–æ MongoDB
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
üìù Environment: development
```

## –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—î—Ç—å—Å—è:

‚úÖ TypeScript –∫–æ–º–ø—ñ–ª—è—Ü—ñ—è  
‚úÖ –õ—ñ–Ω—Ç–µ—Ä (ESLint)  
‚úÖ Express —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è  
‚úÖ Health check endpoint –ø—Ä–∞—Ü—é—î  
‚úÖ MongoDB –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (—è–∫—â–æ –ë–î –¥–æ—Å—Ç—É–ø–Ω–∞)  
‚úÖ Middleware –±–µ–∑–ø–µ–∫–∏ (helmet, CORS, rate limiting)  
‚úÖ –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ (404, error handler)  
‚úÖ –õ–æ–≥—É–≤–∞–Ω–Ω—è (Pino)

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏:

### –ü–æ–º–∏–ª–∫–∞: "MongoDB connection failed"

- –ü–µ—Ä–µ–≤—ñ—Ä, —á–∏ –∑–∞–ø—É—â–µ–Ω–∏–π MongoDB –ª–æ–∫–∞–ª—å–Ω–æ –∞–±–æ —á–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π URI –≤ `.env`
- –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –º–æ–∂–Ω–∞ —Ç–∏–º—á–∞—Å–æ–≤–æ –∑–∞–∫–æ–º–µ–Ω—Ç—É–≤–∞—Ç–∏ `connectDatabase()` –≤ `app.ts`

### –ü–æ–º–∏–ª–∫–∞: "JWT_SECRET –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏"

- –ó–±—ñ–ª—å—à –¥–æ–≤–∂–∏–Ω—É JWT_SECRET –≤ `.env` –¥–æ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª—ñ–≤

### –ü–æ–º–∏–ª–∫–∞: "Port 3000 already in use"

- –ó–º—ñ–Ω–∏ PORT –≤ `.env` –Ω–∞ —ñ–Ω—à–∏–π (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 3001)

---

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

# üß™ –ü–æ–≤–Ω–∏–π –ø–ª–∞–Ω –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è Auth —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—É

## üìã –ó–º—ñ—Å—Ç

1. [–ü–µ—Ä–µ–¥—É–º–æ–≤–∏](#–ø–µ—Ä–µ–¥—É–º–æ–≤–∏)
2. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-—Å–µ—Ä–≤–µ—Ä–∞)
3. [–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É](#–Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è-–º–æ–±—ñ–ª—å–Ω–æ–≥–æ-–¥–æ–¥–∞—Ç–∫—É)
4. [–ó–∞–ø—É—Å–∫ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#–∑–∞–ø—É—Å–∫-—Ç–∞-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
5. [–ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è](#—á–µ–∫-–ª–∏—Å—Ç-—Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
6. [–¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è](#—Ç–∏–ø–æ–≤—ñ-–ø—Ä–æ–±–ª–µ–º–∏-—Ç–∞-—Ä—ñ—à–µ–Ω–Ω—è)

---

## üîß –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

### –ù–µ–æ–±—Ö—ñ–¥–Ω–µ –ø—Ä–æ–≥—Ä–∞–º–Ω–µ –∑–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è:

- ‚úÖ Node.js >= 18.0.0
- ‚úÖ MongoDB (–ª–æ–∫–∞–ª—å–Ω–æ –∞–±–æ Atlas)
- ‚úÖ React Native CLI
- ‚úÖ Android Studio (–¥–ª—è Android –µ–º—É–ª—è—Ç–æ—Ä–∞)
- ‚úÖ Xcode (–¥–ª—è iOS —Å–∏–º—É–ª—è—Ç–æ—Ä–∞)
- ‚úÖ Git

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è:

```bash
node --version  # –ú–∞—î –±—É—Ç–∏ >= 18.0.0
npm --version
mongod --version
```

---

## üñ•Ô∏è –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞

### –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env —Ñ–∞–π–ª—É

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `server/.env` –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏–º –≤–º—ñ—Å—Ç–æ–º:

```env
NODE_ENV=development
PORT=3000
MONGODB_URI=mongodb://localhost:27017/smartcoach
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-for-security-change-this
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
SMS_PROVIDER=twilio
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=
TWILIO_PHONE_NUMBER=
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
CORS_ORIGIN=http://localhost:3000,http://10.0.2.2:3000,http://127.0.0.1:3000
LOG_LEVEL=info
```

**–í–∞–∂–ª–∏–≤–æ:**

- `JWT_SECRET` - –∑–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∏–ø–∞–¥–∫–æ–≤–∏–π —Ä—è–¥–æ–∫ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏
- `CORS_ORIGIN` - –º—ñ—Å—Ç–∏—Ç—å –∞–¥—Ä–µ—Å–∏ –¥–ª—è iOS (localhost) —Ç–∞ Android (10.0.2.2) –µ–º—É–ª—è—Ç–æ—Ä—ñ–≤
- `MONGODB_URI` - —è–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ MongoDB Atlas, –∑–∞–º—ñ–Ω—ñ—Ç—å –Ω–∞ –≤–∞—à connection string

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è MongoDB

**‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û:** –£ –≤–∞—Å –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π MongoDB Atlas (—Ö–º–∞—Ä–Ω–∞ –≤–µ—Ä—Å—ñ—è)!

–Ø–∫—â–æ –≤–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **MongoDB Atlas** (—è–∫ —É –≤–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É):

- ‚úÖ **–ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ** –≤—Å—Ç–∞–Ω–æ–≤–ª—é–≤–∞—Ç–∏ –∞–±–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB
- ‚úÖ MongoDB Compass - —Ü–µ –ø—Ä–æ—Å—Ç–æ GUI –∫–ª—ñ—î–Ω—Ç –¥–ª—è –ø–µ—Ä–µ–≥–ª—è–¥—É –¥–∞–Ω–∏—Ö
- ‚úÖ –°–µ—Ä–≤–µ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ Atlas –ø—Ä–∏ –∑–∞–ø—É—Å–∫—É
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `MONGODB_URI` –≤ `.env` –º—ñ—Å—Ç–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π connection string

**–Ø–∫—â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB** (–∑–∞–º—ñ—Å—Ç—å Atlas):

**macOS (Homebrew):**

```bash
brew tap mongodb/brew
brew install mongodb-community
brew services start mongodb-community
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å—É
brew services list | grep mongodb
```

**Linux:**

```bash
sudo systemctl start mongod
# –ê–±–æ
sudo service mongod start
```

**Windows:**

```bash
net start MongoDB
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è (—Ç—ñ–ª—å–∫–∏ –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ MongoDB):**

```bash
mongosh mongodb://localhost:27017/smartcoach
```

### –ö—Ä–æ–∫ 3: –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd server
npm install
```

### –ö—Ä–æ–∫ 4: –ó–±—ñ—Ä–∫–∞ TypeScript (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)

```bash
cd server
npm run build
```

### –ö—Ä–æ–∫ 5: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

**Development —Ä–µ–∂–∏–º (–∑ auto-reload):**

```bash
cd server
npm run dev
```

**Production —Ä–µ–∂–∏–º:**

```bash
cd server
npm run build
npm start
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**

```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
üìù Environment: development
```

### –ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ä–æ–±–æ—Ç–∏ —Å–µ—Ä–≤–µ—Ä–∞

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –Ω–æ–≤–∏–π —Ç–µ—Ä–º—ñ–Ω–∞–ª —Ç–∞ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
curl http://localhost:3000/health
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "Server is running",
  "timestamp": "2024-..."
}
```

---

## üì± –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É

### –í–∞–∂–ª–∏–≤–æ: API URL –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

| –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞             | API URL                                          |
| --------------------- | ------------------------------------------------ |
| **iOS Simulator**     | `http://localhost:3000` ‚úÖ                       |
| **Android Emulator**  | `http://10.0.2.2:3000` ‚úÖ                        |
| **–§—ñ–∑–∏—á–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π** | `http://192.168.x.x:3000` (IP –≤–∞—à–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞) |

### –ü–æ—Ç–æ—á–Ω–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

–ù–∞—Ä–∞–∑—ñ API URL –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –≤ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö —Ñ–∞–π–ª–∞—Ö:

- ‚úÖ `src/screens/ForgotPasswordScreen.js`
- ‚úÖ `src/screens/ForgotPasswordCodeScreen.js`
- ‚úÖ `src/screens/ResetPasswordScreen.js`

**–ü—Ä–∏–∫–ª–∞–¥ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**

```javascript
import {Platform} from 'react-native';

const API_BASE_URL = __DEV__
  ? Platform.OS === 'android'
    ? 'http://10.0.2.2:3000'
    : 'http://localhost:3000'
  : 'https://your-production-api.com';
```

### –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π –∫–ª—ñ—î–Ω—Ç–∞

```bash
# –í –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ–µ–∫—Ç—É
npm install
```

### –î–ª—è iOS (–¥–æ–¥–∞—Ç–∫–æ–≤–æ):

```bash
cd ios
pod install
cd ..
```

---

## üöÄ –ó–∞–ø—É—Å–∫ —Ç–∞ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç 1: Android –µ–º—É–ª—è—Ç–æ—Ä

#### 1. –ó–∞–ø—É—Å–∫ Android –µ–º—É–ª—è—Ç–æ—Ä–∞

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ Android Studio —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å –µ–º—É–ª—è—Ç–æ—Ä
# –ê–±–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫:
emulator -avd <AVD_NAME>
```

#### 2. –ó–∞–ø—É—Å–∫ Metro Bundler

```bash
# –í –∫–æ—Ä–µ–Ω–µ–≤—ñ–π –ø–∞–ø—Ü—ñ –ø—Ä–æ–µ–∫—Ç—É
npm start
```

#### 3. –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É –Ω–∞ Android

```bash
npm run android
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**

- –°–µ—Ä–≤–µ—Ä –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ `http://localhost:3000`
- –î–æ–¥–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ `http://10.0.2.2:3000`

### –í–∞—Ä—ñ–∞–Ω—Ç 2: iOS —Å–∏–º—É–ª—è—Ç–æ—Ä

#### 1. –ó–∞–ø—É—Å–∫ iOS —Å–∏–º—É–ª—è—Ç–æ—Ä–∞

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ Xcode —Ç–∞ –∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∏–º—É–ª—è—Ç–æ—Ä
# –ê–±–æ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω–∏–π —Ä—è–¥–æ–∫:
open -a Simulator
```

#### 2. –ó–∞–ø—É—Å–∫ Metro Bundler

```bash
npm start
```

#### 3. –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É –Ω–∞ iOS

```bash
npm run ios
```

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è:**

- –°–µ—Ä–≤–µ—Ä –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ `http://localhost:3000`
- –î–æ–¥–∞—Ç–æ–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ `http://localhost:3000`

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –§—ñ–∑–∏—á–Ω–∏–π –ø—Ä–∏—Å—Ç—Ä—ñ–π

#### 1. –ó–Ω–∞–π–¥—ñ—Ç—å IP –∞–¥—Ä–µ—Å—É –≤–∞—à–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞

**macOS/Linux:**

```bash
ifconfig | grep "inet " | grep -v 127.0.0.1
# –ê–±–æ
ipconfig getifaddr en0
```

**Windows:**

```bash
ipconfig
# –®—É–∫–∞–π—Ç–µ IPv4 –∞–¥—Ä–µ—Å—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, 192.168.1.100)
```

#### 2. –û–Ω–æ–≤—ñ—Ç—å API_BASE_URL –≤ –µ–∫—Ä–∞–Ω–∞—Ö

–ó–∞–º—ñ–Ω—ñ—Ç—å `localhost` –∞–±–æ `10.0.2.2` –Ω–∞ –≤–∞—à IP –∞–¥—Ä–µ—Å:

```javascript
const API_BASE_URL = __DEV__
  ? 'http://192.168.1.100:3000' // –í–∞—à IP
  : 'https://your-production-api.com';
```

#### 3. –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –ø—Ä–∏—Å—Ç—Ä—ñ–π —Ç–∞ –∫–æ–º–ø'—é—Ç–µ—Ä –≤ –æ–¥–Ω—ñ–π –º–µ—Ä–µ–∂—ñ Wi-Fi

#### 4. –ó–∞–ø—É—Å—Ç—ñ—Ç—å –¥–æ–¥–∞—Ç–æ–∫

```bash
npm run android  # –∞–±–æ npm run ios
```

---

## ‚úÖ –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

#### 1. –ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å (ForgotPasswordScreen)

- [ ] –í—ñ–¥–∫—Ä–∏—Ç–∏ –µ–∫—Ä–∞–Ω "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?"
- [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (—Ñ–æ—Ä–º–∞—Ç: +38 XXX XXX XX XX)
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS"
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –∫–æ–¥ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞ (development —Ä–µ–∂–∏–º)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –Ω–æ–º–µ—Ä, –º–µ—Ä–µ–∂–µ–≤–∞ –ø–æ–º–∏–ª–∫–∞)

#### 2. –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É (ForgotPasswordCodeScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –∫–æ–¥—É
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–∞–π–º–µ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ–≥–æ –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–Ω—è
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –Ω–µ–≤—ñ—Ä–Ω–æ–≥–æ –∫–æ–¥—É
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é

#### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é (ResetPasswordScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
- [ ] –í–≤–µ—Å—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø–∞—Ä–æ–ª—é (–º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–µ–ª–∏–∫—ñ/–º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏)
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ø–∞—Ä–æ–ª—ñ —Å–ø—ñ–≤–ø–∞–¥–∞—é—Ç—å
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å"
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —É—Å–ø—ñ—à–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó (—è–∫—â–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ)

#### 1. –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (RegistrationScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–û—Ç—Ä–∏–º–∞—Ç–∏ SMS"
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API –≤–∏–∫–ª–∏–∫ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É

#### 2. –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É (RegistrationCodeScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

#### 3. –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é (CreatePasswordScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å
- [ ] –í–≤–µ—Å—Ç–∏ –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—Ö–æ–¥—É (—è–∫—â–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ)

#### 1. –í—Ö—ñ–¥ (LoginScreen)

- [ ] –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
- [ ] –í–≤–µ—Å—Ç–∏ –ø–∞—Ä–æ–ª—å
- [ ] –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–£–≤—ñ–π—Ç–∏"
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API –≤–∏–∫–ª–∏–∫
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ MongoDB

### –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ –ë–î

```bash
mongosh mongodb://localhost:27017/smartcoach
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö

```javascript
// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
db.users.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ refresh —Ç–æ–∫–µ–Ω—ñ–≤
db.refreshtokens.find().pretty();

// –û—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö (–æ–±–µ—Ä–µ–∂–Ω–æ!)
db.users.deleteMany({});
db.verificationcodes.deleteMany({});
db.refreshtokens.deleteMany({});
```

---

## üêõ –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "Network request failed" –Ω–∞ Android

**–ü—Ä–∏—á–∏–Ω–∞:** Android –µ–º—É–ª—è—Ç–æ—Ä –Ω–µ –º–æ–∂–µ –¥–æ—Å—Ç—É–ø–∏—Ç–∏—Å—è –¥–æ `localhost`

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `http://10.0.2.2:3000` –¥–ª—è Android
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ –ø–æ—Ä—Ç—É 3000
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CORS –≤ `.env` —Ñ–∞–π–ª—ñ

### –ü—Ä–æ–±–ª–µ–º–∞ 2: CORS –ø–æ–º–∏–ª–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –¥–æ–∑–≤–æ–ª—è—î –∑–∞–ø–∏—Ç–∏ –∑ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `CORS_ORIGIN` –≤ `server/.env`:
   ```env
   CORS_ORIGIN=http://localhost:3000,http://10.0.2.2:3000,http://127.0.0.1:3000
   ```
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä –ø—ñ—Å–ª—è –∑–º—ñ–Ω–∏ `.env`

### –ü—Ä–æ–±–ª–µ–º–∞ 3: MongoDB –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∞:**

- –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **MongoDB Atlas**: –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π connection string –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –º–µ—Ä–µ–∂–µ—é
- –Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ **–ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB**: —Å–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π

**–†—ñ—à–µ–Ω–Ω—è –¥–ª—è MongoDB Atlas:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `MONGODB_URI` –≤ `server/.env` - –º–∞—î –±—É—Ç–∏ —É —Ñ–æ—Ä–º–∞—Ç—ñ `mongodb+srv://...`
2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –ø–∞—Ä–æ–ª—å –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π (—è–∫—â–æ –º—ñ—Å—Ç–∏—Ç—å —Å–ø–µ—Ü—Å–∏–º–≤–æ–ª–∏, –∑–∞–∫–æ–¥—É–π—Ç–µ —ó—Ö)
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ IP –∞–¥—Ä–µ—Å–∞ –¥–æ–¥–∞–Ω–∞ –¥–æ whitelist –≤ Atlas (0.0.0.0/0 –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

**–†—ñ—à–µ–Ω–Ω—è –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ MongoDB:**

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å—Ç–∞—Ç—É—Å MongoDB
brew services list | grep mongodb  # macOS
sudo systemctl status mongod       # Linux

# –ó–∞–ø—É—Å—Ç—ñ—Ç—å MongoDB
brew services start mongodb-community  # macOS
sudo systemctl start mongod            # Linux
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "JWT_SECRET –º–∞—î –±—É—Ç–∏ –º—ñ–Ω—ñ–º—É–º 32 —Å–∏–º–≤–æ–ª–∏"

**–†—ñ—à–µ–Ω–Ω—è:**
–ó–º—ñ–Ω—ñ—Ç—å `JWT_SECRET` –≤ `server/.env` –Ω–∞ —Ä—è–¥–æ–∫ >= 32 —Å–∏–º–≤–æ–ª–∏:

```env
JWT_SECRET=your-super-secret-key-minimum-32-characters-long-change-this-now
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: Rate limiting –ø–æ–º–∏–ª–∫–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ó–∞–±–∞–≥–∞—Ç–æ –∑–∞–ø–∏—Ç—ñ–≤ –∑ –æ–¥–Ω–æ–≥–æ IP

**–†—ñ—à–µ–Ω–Ω—è:**

- –ó–∞—á–µ–∫–∞–π—Ç–µ 15 —Ö–≤–∏–ª–∏–Ω
- –ê–±–æ –∑–º—ñ–Ω—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –ê–±–æ —Ç–∏–º—á–∞—Å–æ–≤–æ –∑–±—ñ–ª—å—à—Ç–µ –ª—ñ–º—ñ—Ç–∏ –≤ `.env`:
  ```env
  RATE_LIMIT_WINDOW_MS=60000
  RATE_LIMIT_MAX_REQUESTS=1000
  ```

### –ü—Ä–æ–±–ª–µ–º–∞ 6: SMS –∫–æ–¥ –Ω–µ –ø—Ä–∏—Ö–æ–¥–∏—Ç—å

**–ü—Ä–∏—á–∏–Ω–∞:** Twilio –Ω–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π (–≤ development —Ä–µ–∂–∏–º—ñ –∫–æ–¥ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å)

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ - –∫–æ–¥ –º–∞—î –≤–∏–≤–æ–¥–∏—Ç–∏—Å—è —Ç–∞–º
- –í development —Ä–µ–∂–∏–º—ñ SMS –Ω–µ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–æ
- –î–ª—è production –Ω–∞–ª–∞—à—Ç—É–π—Ç–µ Twilio credentials –≤ `.env`

### –ü—Ä–æ–±–ª–µ–º–∞ 7: –ü–æ–º–∏–ª–∫–∞ "Cannot connect to Metro"

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –û—á–∏—Å—Ç–∫–∞ –∫–µ—à—É
npm start -- --reset-cache

# –ê–±–æ
watchman watch-del-all  # macOS
rm -rf node_modules
npm install
```

### –ü—Ä–æ–±–ª–µ–º–∞ 8: –ü–æ–º–∏–ª–∫–∏ –ø—ñ–¥ —á–∞—Å –∑–±—ñ—Ä–∫–∏ iOS

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
cd ios
pod deintegrate
pod install
cd ..
npm run ios
```

---

## üìä –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ —Ç–∞ –¥–µ–±–∞–≥—ñ–Ω–≥

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤ —Å–µ—Ä–≤–µ—Ä–∞

–°–µ—Ä–≤–µ—Ä –≤–∏–≤–æ–¥–∏—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ñ –ª–æ–≥–∏ –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤. –ü–µ—Ä–µ–≤—ñ—Ä—è–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ –¥–ª—è:

- –í—Ö—ñ–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- –ü–æ–º–∏–ª–æ–∫ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó
- SMS –∫–æ–¥—ñ–≤ (–≤ development —Ä–µ–∂–∏–º—ñ)
- –ü–æ–º–∏–ª–æ–∫ –ë–î

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –º–µ—Ä–µ–∂–µ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –≤ –¥–æ–¥–∞—Ç–∫—É

**React Native Debugger:**

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –º–µ–Ω—é –¥–æ–¥–∞—Ç–∫—É (shake device –∞–±–æ Cmd+D –≤ —Å–∏–º—É–ª—è—Ç–æ—Ä—ñ)
2. –í–∏–±–µ—Ä—ñ—Ç—å "Debug"
3. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Network tab –≤ DevTools

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ - –¥–æ–¥–∞—Ç–∏ console.log:**

```javascript
console.log('API Request:', url, body);
console.log('API Response:', response);
```

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Ç–æ–∫–µ–Ω—ñ–≤

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –≤—Ö–æ–¥—É/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

- –ß–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è —Ç–æ–∫–µ–Ω–∏ –≤ AsyncStorage
- –ß–∏ —Ç–æ–∫–µ–Ω–∏ –ø–µ—Ä–µ–¥–∞—é—Ç—å—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–∞—Ö –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

---

## üéØ –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

1. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è LoginScreen** - –∑–∞–º—ñ–Ω–∏—Ç–∏ –º–æ–∫–æ–≤—ñ –¥–∞–Ω—ñ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ API –≤–∏–∫–ª–∏–∫–∏
2. **–Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è RegistrationScreen** - –¥–æ–¥–∞—Ç–∏ API –≤–∏–∫–ª–∏–∫–∏ –¥–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
3. **–ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤** - —Ä–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è access/refresh —Ç–æ–∫–µ–Ω—ñ–≤
4. **Auto-refresh —Ç–æ–∫–µ–Ω—ñ–≤** - –¥–æ–¥–∞—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
5. **Error handling** - –ø–æ–∫—Ä–∞—â–∏—Ç–∏ –æ–±—Ä–æ–±–∫—É –ø–æ–º–∏–ª–æ–∫
6. **Loading states** - –¥–æ–¥–∞—Ç–∏ —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è

---

## üìù –ù–æ—Ç–∞—Ç–∫–∏

- –í development —Ä–µ–∂–∏–º—ñ SMS –∫–æ–¥–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞
- –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ —Ä–µ–∞–ª—å–Ω—ñ –Ω–æ–º–µ—Ä–∏ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤ (—Ñ–æ—Ä–º–∞—Ç: +380XXXXXXXXX)
- Rate limiting –º–æ–∂–µ –æ–±–º–µ–∂—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± - –≤—Ä–∞—Ö–æ–≤—É–π—Ç–µ —Ü–µ –ø—Ä–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—ñ
- MongoDB –∑–±–µ—Ä—ñ–≥–∞—î –¥–∞–Ω—ñ –ª–æ–∫–∞–ª—å–Ω–æ - –æ—á–∏—â–∞–π—Ç–µ –ë–î –º—ñ–∂ —Ç–µ—Å—Ç–∞–º–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ

---

**–£—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è! üöÄ**

---

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

# üß™ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

## üìã –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. **MongoDB** –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π
2. **–°–µ—Ä–≤–µ—Ä** –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π –Ω–∞ –ø–æ—Ä—Ç—É 3000
3. **–ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫** –º–∞—î –±—É—Ç–∏ –∑–∞–ø—É—â–µ–Ω–∏–π (iOS/Android)

---

## üîß –ö—Ä–æ–∫ 1: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–≤–µ—Ä–∞

### 1.1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ .env —Ñ–∞–π–ª—É

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Å—è, —â–æ –≤ `server/.env` —î –≤—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∑–º—ñ–Ω–Ω—ñ:

```env
NODE_ENV=development
PORT=3000
MONGODB_URI=mongodb://localhost:27017/smartcoach
JWT_SECRET=your-super-secret-key-minimum-32-characters-long
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
CORS_ORIGIN=http://localhost:3000
LOG_LEVEL=info
```

### 1.2. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd server
npm run dev
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**

```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
üìù Environment: development
```

---

## üì± –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è API URL –¥–ª—è –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É

### –í–∞–∂–ª–∏–≤–æ: API URL –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º

–î–ª—è **iOS Simulator**:

- `http://localhost:3000` ‚úÖ –ø—Ä–∞—Ü—é—î

–î–ª—è **Android Emulator**:

- `http://localhost:3000` ‚ùå –ù–ï –ø—Ä–∞—Ü—é—î
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `http://10.0.2.2:3000` ‚úÖ

–î–ª—è **—Ñ—ñ–∑–∏—á–Ω–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é**:

- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π IP –∞–¥—Ä–µ—Å—É —Ç–≤–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞: `http://192.168.x.x:3000`
- –ó–Ω–∞–π–¥–∏ IP: `ipconfig` (Windows) –∞–±–æ `ifconfig` (macOS/Linux)

### –û–Ω–æ–≤–ª–µ–Ω–Ω—è API_BASE_URL

–í —Ñ–∞–π–ª–∞—Ö:

- `src/screens/ForgotPasswordScreen.js`
- `src/screens/ForgotPasswordCodeScreen.js`
- `src/screens/ResetPasswordScreen.js`

–ó–∞–º—ñ–Ω–∏:

```javascript
const API_BASE_URL = __DEV__
  ? 'http://localhost:3000' // –î–ª—è iOS
  : 'https://your-production-api.com';
```

–ù–∞ (–¥–ª—è Android):

```javascript
import {Platform} from 'react-native';

const API_BASE_URL = __DEV__
  ? Platform.OS === 'android'
    ? 'http://10.0.2.2:3000' // Android Emulator
    : 'http://localhost:3000' // iOS Simulator
  : 'https://your-production-api.com';
```

---

## üß™ –ö—Ä–æ–∫ 3: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ cURL (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)

### 3.1. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É forgot-password

```bash
curl -X POST http://localhost:3000/api/v1/auth/forgot-password \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567"}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (—è–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ—Å–Ω—É—î):**

```json
{
  "success": true,
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É",
  "code": "123456"
}
```

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –í development —Ä–µ–∂–∏–º—ñ –∫–æ–¥ —Ç–∞–∫–æ–∂ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞:

```
üì± SMS –∫–æ–¥ –¥–ª—è +380501234567: 123456
```

### 3.2. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ–¥—É

```bash
curl -X POST http://localhost:3000/api/v1/auth/verify-code \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567", "code": "123456"}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ",
  "verified": true
}
```

### 3.3. –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é

```bash
curl -X POST http://localhost:3000/api/v1/auth/create-password \
  -H "Content-Type: application/json" \
  -d '{
    "phone": "+380501234567",
    "password": "NewPassword123"
  }'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–ü–∞—Ä–æ–ª—å —Å—Ç–≤–æ—Ä–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ",
  "tokens": {
    "access": "...",
    "refresh": "..."
  },
  "user": {...}
}
```

---

## üì± –ö—Ä–æ–∫ 4: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ –º–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫

### 4.1. –ó–∞–ø—É—Å–∫ –¥–æ–¥–∞—Ç–∫—É

```bash
# iOS
npm run ios

# Android
npm run android
```

### 4.2. –ü–æ–∫—Ä–æ–∫–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

#### –ö—Ä–æ–∫ 1: –í—ñ–¥–∫—Ä–∏–π –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

- –ó–∞–ø—É—Å—Ç–∏ –¥–æ–¥–∞—Ç–æ–∫
- –ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è `LoginScreen`

#### –ö—Ä–æ–∫ 2: –ù–∞—Ç–∏—Å–Ω–∏ "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?"

- –ù–∞—Ç–∏—Å–Ω–∏ –Ω–∞ —Ç–µ–∫—Å—Ç "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?" –≤–Ω–∏–∑—É –ø–æ–ª—è –ø–∞—Ä–æ–ª—é
- –ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è `ForgotPasswordScreen`

#### –ö—Ä–æ–∫ 3: –í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É

- –í–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `+38 050 123 45 67`)
- –ù–∞—Ç–∏—Å–Ω–∏ "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS"
- **–ü–µ—Ä–µ–≤—ñ—Ä:**
  - ‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤–Ω–∞ —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –Ω–æ–º–µ—Ä –ø–æ–≤–Ω–∏–π (17 —Å–∏–º–≤–æ–ª—ñ–≤)
  - ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–í—ñ–¥–ø—Ä–∞–≤–∫–∞..."
  - ‚úÖ –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ—Å–Ω—É—î - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –∫–æ–¥—É
  - ‚úÖ –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ - –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –ø—Ä–æ –ø–æ–º–∏–ª–∫—É

#### –ö—Ä–æ–∫ 4: –í–≤–µ–¥–∏ SMS –∫–æ–¥

- –ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è `ForgotPasswordCodeScreen`
- –í–≤–µ–¥–∏ 6-–∑–Ω–∞—á–Ω–∏–π –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- **–ü–µ—Ä–µ–≤—ñ—Ä:**
  - ‚úÖ –ö–Ω–æ–ø–∫–∞ "–î–∞–ª—ñ" –∞–∫—Ç–∏–≤–Ω–∞ —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –≤—Å—ñ 6 –ø–æ–ª—ñ–≤ –∑–∞–ø–æ–≤–Ω–µ–Ω—ñ
  - ‚úÖ –¢–∞–π–º–µ—Ä –ø–æ–∫–∞–∑—É—î —á–∞—Å –¥–æ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø–æ–≤—Ç–æ—Ä–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏
  - ‚úÖ –ö–Ω–æ–ø–∫–∞ "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS –∑ –∫–æ–¥–æ–º" –∞–∫—Ç–∏–≤–Ω–∞ –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞
  - ‚úÖ –ü—Ä–∏ –Ω–µ–≤—ñ—Ä–Ω–æ–º—É –∫–æ–¥—ñ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞

#### –ö—Ä–æ–∫ 5: –°—Ç–≤–æ—Ä–∏ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å

- –ú–∞—î –≤—ñ–¥–∫—Ä–∏—Ç–∏—Å—è `ResetPasswordScreen`
- –í–≤–µ–¥–∏ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–µ–ª–∏–∫—ñ/–º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏)
- –ü–æ–≤—Ç–æ—Ä–∏ –ø–∞—Ä–æ–ª—å
- **–ü–µ—Ä–µ–≤—ñ—Ä:**
  - ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é –ø—Ä–∞—Ü—é—î (–ø–æ–∫–∞–∑—É—î –ø–æ–º–∏–ª–∫–∏)
  - ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
  - ‚úÖ –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ `LoginScreen`

#### –ö—Ä–æ–∫ 6: –£–≤—ñ–π–¥–∏ –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º

- –ù–∞ –µ–∫—Ä–∞–Ω—ñ –≤—Ö–æ–¥—É –≤–≤–µ–¥–∏ –Ω–æ–º–µ—Ä —Ç–∞ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
- –ü–µ—Ä–µ–≤—ñ—Ä, —â–æ –≤—Ö—ñ–¥ –ø—Ä–∞—Ü—é—î

---

## üîç –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ–º–∏–ª–æ–∫

### –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

#### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–ü–æ–º–∏–ª–∫–∞ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ —Å–µ—Ä–≤–µ—Ä–∞"

**–ü—Ä–∏—á–∏–Ω–∏:**

- –°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∏–π API_BASE_URL
- –ü—Ä–æ–±–ª–µ–º–∏ –∑ –º–µ—Ä–µ–∂–µ—é

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ü–µ—Ä–µ–≤—ñ—Ä, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π: `curl http://localhost:3000/health`
2. –ü–µ—Ä–µ–≤—ñ—Ä API_BASE_URL –≤ –µ–∫—Ä–∞–Ω–∞—Ö
3. –î–ª—è Android –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π `10.0.2.2` –∑–∞–º—ñ—Å—Ç—å `localhost`

#### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–∏–π"

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º –Ω–µ–º–∞—î –≤ –ë–î

**–†—ñ—à–µ–Ω–Ω—è:**

1. –°–ø–æ—á–∞—Ç–∫—É –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ `RegistrationScreen`
2. –ê–±–æ —Å—Ç–≤–æ—Ä–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤—Ä—É—á–Ω—É –≤ –ë–î

#### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó"

**–ü—Ä–∏—á–∏–Ω–∏:**

- –ö–æ–¥ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π (10 —Ö–≤–∏–ª–∏–Ω)
- –ö–æ–¥ –≤–≤–µ–¥–µ–Ω–æ –Ω–µ–≤—ñ—Ä–Ω–æ
- –ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± (3 —Å–ø—Ä–æ–±–∏)

**–†—ñ—à–µ–Ω–Ω—è:**

1. –ó–∞–ø—Ä–æ—Å–∏ –Ω–æ–≤–∏–π –∫–æ–¥
2. –ü–µ—Ä–µ–≤—ñ—Ä –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
3. –í–≤–µ–¥–∏ –∫–æ–¥ —à–≤–∏–¥—à–µ (–¥–æ –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–µ—Ä–º—ñ–Ω—É –¥—ñ—ó)

#### –ü—Ä–æ–±–ª–µ–º–∞ 4: CORS –ø–æ–º–∏–ª–∫–∞

**–ü—Ä–∏—á–∏–Ω–∞:** –°–µ—Ä–≤–µ—Ä –Ω–µ –¥–æ–∑–≤–æ–ª—è—î –∑–∞–ø–∏—Ç–∏ –∑ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É

**–†—ñ—à–µ–Ω–Ω—è:**
–ü–µ—Ä–µ–≤—ñ—Ä `CORS_ORIGIN` –≤ `.env` —Ñ–∞–π–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞

---

## üìä –ö—Ä–æ–∫ 6: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ª–æ–≥—ñ–≤

### –õ–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞

–ü—ñ–¥ —á–∞—Å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—è–π –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞:

```
üì± SMS –∫–æ–¥ –¥–ª—è +380501234567: 123456
üíæ –ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑–±–µ—Ä–µ–∂–µ–Ω–æ –≤ –ë–î
‚úÖ –ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ
```

### –õ–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫

–Ø–∫—â–æ —î –ø–æ–º–∏–ª–∫–∏, –≤–æ–Ω–∏ –±—É–¥—É—Ç—å –≤ –∫–æ–Ω—Å–æ–ª—ñ:

```
‚ùå –ü–æ–º–∏–ª–∫–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
```

---

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

- [ ] –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π —Ç–∞ –¥–æ—Å—Ç—É–ø–Ω–∏–π
- [ ] MongoDB –ø—ñ–¥–∫–ª—é—á–µ–Ω–∞
- [ ] API_BASE_URL –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∏
- [ ] –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —ñ—Å–Ω—É—î –≤ –ë–î (–∞–±–æ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π —á–µ—Ä–µ–∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é)
- [ ] –ï–∫—Ä–∞–Ω "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?" –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è –∑ LoginScreen
- [ ] SMS –∫–æ–¥ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è —Ç–∞ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—ñ
- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É –ø—Ä–∞—Ü—é—î
- [ ] –¢–∞–π–º–µ—Ä –ø–æ–≤—Ç–æ—Ä–Ω–æ—ó –≤—ñ–¥–ø—Ä–∞–≤–∫–∏ –ø—Ä–∞—Ü—é—î
- [ ] –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é –ø—Ä–∞—Ü—é—î
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é –ø—Ä–∞—Ü—é—î
- [ ] –í—Ö—ñ–¥ –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º –ø—Ä–∞—Ü—é—î
- [ ] –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–æ–∫ –ø—Ä–∞—Ü—é—î (–Ω–µ—ñ—Å–Ω—É—é—á–∏–π –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, –Ω–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥, —Ç–æ—â–æ)

---

## üéØ –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–µ—Å—Ç–∏

### –¢–µ—Å—Ç 1: Rate Limiting

- –°–ø—Ä–æ–±—É–π –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –±—ñ–ª—å—à–µ 3 SMS –∑–∞ –≥–æ–¥–∏–Ω—É
- –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–æ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è –ª—ñ–º—ñ—Ç—É

### –¢–µ—Å—Ç 2: –ü—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π –∫–æ–¥

- –ó–∞–ø—Ä–æ—Å–∏ –∫–æ–¥
- –ó–∞—á–µ–∫–∞–π 11 —Ö–≤–∏–ª–∏–Ω
- –°–ø—Ä–æ–±—É–π –≤–≤–µ—Å—Ç–∏ –∫–æ–¥
- –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –ø–æ–º–∏–ª–∫–∞ "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π"

### –¢–µ—Å—Ç 3: –ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥

- –í–≤–µ–¥–∏ –Ω–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ 3 —Ä–∞–∑–∏
- –ú–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –ø–æ–º–∏–ª–∫–∞ –ø—Ä–æ –ø–µ—Ä–µ–≤–∏—â–µ–Ω–Ω—è —Å–ø—Ä–æ–±

### –¢–µ—Å—Ç 4: –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –Ω–∞–∑–∞–¥

- –ü–µ—Ä–µ–≤—ñ—Ä, —â–æ –∫–Ω–æ–ø–∫–∞ "–ù–∞–∑–∞–¥" –ø—Ä–∞—Ü—é—î –Ω–∞ –≤—Å—ñ—Ö –µ–∫—Ä–∞–Ω–∞—Ö
- –ü–µ—Ä–µ–≤—ñ—Ä, —â–æ –¥–∞–Ω—ñ –Ω–µ –≤—Ç—Ä–∞—á–∞—é—Ç—å—Å—è –ø—Ä–∏ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—ñ

---

## üìù –ü—Ä–∏–º—ñ—Ç–∫–∏

1. **Development —Ä–µ–∂–∏–º:** SMS –∫–æ–¥–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ —Ç–∞ –ø–æ–≤–µ—Ä—Ç–∞—é—Ç—å—Å—è –≤ API –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
2. **Production —Ä–µ–∂–∏–º:** SMS –∫–æ–¥–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è —á–µ—Ä–µ–∑ Twilio (—è–∫—â–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ)
3. **–ë–µ–∑–ø–µ–∫–∞:** –î–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å (–∑–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –Ω–æ–º–µ—Ä—ñ–≤)

---

# –ü–æ–≤–Ω–∏–π —Ü–∏–∫–ª —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

# üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø–æ–≤–Ω–æ–≥–æ —Ü–∏–∫–ª—É: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è ‚Üí –í—Ö—ñ–¥ ‚Üí –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

## ‚úÖ –©–æ —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω–æ

–í—Å—ñ –µ–∫—Ä–∞–Ω–∏ —Ç–µ–ø–µ—Ä —ñ–Ω—Ç–µ–≥—Ä–æ–≤–∞–Ω—ñ –∑ API:

- ‚úÖ **RegistrationScreen** - `/api/v1/auth/register`
- ‚úÖ **RegistrationCodeScreen** - `/api/v1/auth/verify-code`
- ‚úÖ **CreatePasswordScreen** - `/api/v1/auth/create-password`
- ‚úÖ **LoginScreen** - `/api/v1/auth/login`
- ‚úÖ **ForgotPasswordScreen** - `/api/v1/auth/forgot-password`
- ‚úÖ **ForgotPasswordCodeScreen** - `/api/v1/auth/verify-code`
- ‚úÖ **ResetPasswordScreen** - `/api/v1/auth/create-password`

---

## üöÄ –ü–µ—Ä–µ–¥—É–º–æ–≤–∏

1. **–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π:**

   ```bash
   cd server
   npm run dev
   ```

2. **MongoDB –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π** (Atlas –∞–±–æ –ª–æ–∫–∞–ª—å–Ω–∏–π)

3. **–ú–æ–±—ñ–ª—å–Ω–∏–π –¥–æ–¥–∞—Ç–æ–∫ –∑–∞–ø—É—â–µ–Ω–∏–π:**
   ```bash
   npm run android  # –∞–±–æ npm run ios
   ```

---

## üìã –ü–æ–∫—Ä–æ–∫–æ–≤–µ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### üîµ –ö—Ä–æ–∫ 1: –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è –Ω–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

#### 1.1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –µ–∫—Ä–∞–Ω —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

- –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è" –Ω–∞ –µ–∫—Ä–∞–Ω—ñ –≤—Ö–æ–¥—É

#### 1.2. –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É

- –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —É —Ñ–æ—Ä–º–∞—Ç—ñ: `+38 XXX XXX XX XX`
- –ù–∞–ø—Ä–∏–∫–ª–∞–¥: `+38 098 123 45 67`
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–û—Ç—Ä–∏–º–∞—Ç–∏ SMS"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –Ω–æ–º–µ—Ä –≤–≤–µ–¥–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ (17 —Å–∏–º–≤–æ–ª—ñ–≤)
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–í—ñ–¥–ø—Ä–∞–≤–∫–∞..."
- ‚úÖ –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É

**–í –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞ –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è:**

```
==================================================
üì± SMS –ö–û–î –í–ï–†–ò–§–Ü–ö–ê–¶–Ü–á
üìû –ù–æ–º–µ—Ä: +380981234567
üîë –ö–æ–¥: 123456
==================================================
```

#### 1.3. –í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

- –í–≤–µ–¥—ñ—Ç—å 6-–∑–Ω–∞—á–Ω–∏–π –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–î–∞–ª—ñ"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –≤—Å—ñ 6 —Ü–∏—Ñ—Ä
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞..."
- ‚úÖ –ü—Ä–∏ –Ω–µ–≤—ñ—Ä–Ω–æ–º—É –∫–æ–¥—ñ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞
- ‚úÖ –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–æ–¥—ñ - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

**–Ø–∫—â–æ –∫–æ–¥ –Ω–µ–≤—ñ—Ä–Ω–∏–π:**

- –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑ (–º–∞–∫—Å–∏–º—É–º 3 —Å–ø—Ä–æ–±–∏)
- –ê–±–æ –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS –∑ –∫–æ–¥–æ–º" –ø—ñ—Å–ª—è –∑–∞–∫—ñ–Ω—á–µ–Ω–Ω—è —Ç–∞–π–º–µ—Ä–∞

#### 1.4. –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å

- –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–µ–ª–∏–∫—ñ/–º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏)
- –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–°—Ç–≤–æ—Ä–∏—Ç–∏ –∞–∫–∞—É–Ω—Ç"

**–í–∏–º–æ–≥–∏ –¥–æ –ø–∞—Ä–æ–ª—é:**

- –ú—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤
- –•–æ—á–∞ –± –æ–¥–Ω–∞ –≤–µ–ª–∏–∫–∞ –ª—ñ—Ç–µ—Ä–∞
- –•–æ—á–∞ –± –æ–¥–Ω–∞ –º–∞–ª–∞ –ª—ñ—Ç–µ—Ä–∞
- –•–æ—á–∞ –± –æ–¥–Ω–∞ —Ü–∏—Ñ—Ä–∞

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é –Ω–∞ –∫–ª—ñ—î–Ω—Ç—ñ
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–°—Ç–≤–æ—Ä–µ–Ω–Ω—è..."
- ‚úÖ –£—Å–ø—ñ—à–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

---

### üü¢ –ö—Ä–æ–∫ 2: –í—Ö—ñ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

#### 2.1. –í–≤–µ–¥—ñ—Ç—å –¥–∞–Ω—ñ –¥–ª—è –≤—Ö–æ–¥—É

- –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (—Ç–æ–π —Å–∞–º–∏–π, —â–æ –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó)
- –í–≤–µ–¥—ñ—Ç—å –ø–∞—Ä–æ–ª—å (—Ç–æ–π —Å–∞–º–∏–π, —â–æ –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ)
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–£–≤—ñ–π—Ç–∏"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –≤–≤–µ–¥–µ–Ω–æ –Ω–æ–º–µ—Ä —Ç–∞ –ø–∞—Ä–æ–ª—å
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–í—Ö—ñ–¥..."
- ‚úÖ –ü—Ä–∏ –Ω–µ–≤—ñ—Ä–Ω–∏—Ö –¥–∞–Ω–∏—Ö –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞
- ‚úÖ –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω (TabBar)

**–¢–æ–∫–µ–Ω–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ:**

- `accessToken` - –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
- `refreshToken` - –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—É

---

### üî¥ –ö—Ä–æ–∫ 3: –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

#### 3.1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –µ–∫—Ä–∞–Ω –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

- –ù–∞ –µ–∫—Ä–∞–Ω—ñ –≤—Ö–æ–¥—É –Ω–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?"

#### 3.2. –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É

- –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É (—Ç–æ–π —Å–∞–º–∏–π, —â–æ –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó)
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –ö–Ω–æ–ø–∫–∞ –∞–∫—Ç–∏–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –∫–æ–ª–∏ –Ω–æ–º–µ—Ä –≤–≤–µ–¥–µ–Ω–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è "–í—ñ–¥–ø—Ä–∞–≤–∫–∞..."
- ‚úÖ –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É

**–í –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞ –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è:**

```
==================================================
üì± SMS –ö–û–î –í–ï–†–ò–§–Ü–ö–ê–¶–Ü–á
üìû –ù–æ–º–µ—Ä: +380981234567
üîë –ö–æ–¥: 654321
==================================================
```

#### 3.3. –í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

- –í–≤–µ–¥—ñ—Ç—å 6-–∑–Ω–∞—á–Ω–∏–π –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–î–∞–ª—ñ"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –∫–æ–¥—É
- ‚úÖ –ü—Ä–∏ –Ω–µ–≤—ñ—Ä–Ω–æ–º—É –∫–æ–¥—ñ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è –ø–æ–º–∏–ª–∫–∞
- ‚úÖ –ü—Ä–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–º—É –∫–æ–¥—ñ - –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é

#### 3.4. –°—Ç–≤–æ—Ä—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å

- –í–≤–µ–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
- –ü—ñ–¥—Ç–≤–µ—Ä–¥—ñ—Ç—å –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—é
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è –ø–∞—Ä–æ–ª—ñ–≤
- ‚úÖ –ü–æ–∫–∞–∑—É—î—Ç—å—Å—è —ñ–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
- ‚úÖ –£—Å–ø—ñ—à–Ω–∏–π –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

#### 3.5. –£–≤—ñ–π–¥—ñ—Ç—å –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º

- –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –í–≤–µ–¥—ñ—Ç—å **–Ω–æ–≤–∏–π** –ø–∞—Ä–æ–ª—å (—Ç–æ–π, —â–æ —â–æ–π–Ω–æ —Å—Ç–≤–æ—Ä–∏–ª–∏)
- –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "–£–≤—ñ–π—Ç–∏"

**–©–æ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏:**

- ‚úÖ –í—Ö—ñ–¥ —É—Å–ø—ñ—à–Ω–∏–π –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º
- ‚úÖ –°—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å –±—ñ–ª—å—à–µ –Ω–µ –ø—Ä–∞—Ü—é—î

---

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ MongoDB

### –ü–µ—Ä–µ–≥–ª—è–¥ –¥–∞–Ω–∏—Ö

```bash
# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ MongoDB
mongosh mongodb://localhost:27017/smartcoach
# –ê–±–æ —á–µ—Ä–µ–∑ MongoDB Compass
```

```javascript
// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
db.users.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ refresh —Ç–æ–∫–µ–Ω—ñ–≤
db.refreshtokens.find().pretty();
```

### –û—á–∏—â–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–∏—Ö –¥–∞–Ω–∏—Ö

```javascript
// –í–∏–¥–∞–ª–∏—Ç–∏ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
db.users.deleteOne({phone: '+380981234567'});

// –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ –∫–æ–¥–∏ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.deleteMany({});

// –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å—ñ refresh —Ç–æ–∫–µ–Ω–∏
db.refreshtokens.deleteMany({});
```

---

## ‚ö†Ô∏è –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: "–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –∑ —Ç–∞–∫–∏–º –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω—É –≤–∂–µ —ñ—Å–Ω—É—î"

**–†—ñ—à–µ–Ω–Ω—è:**

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —ñ–Ω—à–∏–π –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
- –ê–±–æ –≤–∏–¥–∞–ª—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ë–î:
  ```javascript
  db.users.deleteOne({phone: '+380981234567'});
  ```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: "–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç SMS"

**–†—ñ—à–µ–Ω–Ω—è:**

- –ó–∞—á–µ–∫–∞–π—Ç–µ 1 –≥–æ–¥–∏–Ω—É
- –ê–±–æ –æ—á–∏—Å—Ç—ñ—Ç—å –∫–æ–¥–∏ –≤ –ë–î:
  ```javascript
  db.verificationcodes.deleteMany({phone: '+380981234567'});
  ```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: "–ù–µ–≤—ñ—Ä–Ω–∏–π –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó"

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞
- –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –∫–æ–¥ –Ω–µ –ø—Ä–æ—Å—Ç—Ä–æ—á–µ–Ω–∏–π (10 —Ö–≤–∏–ª–∏–Ω)
- –°–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å–∏—Ç–∏ –Ω–æ–≤–∏–π –∫–æ–¥

### –ü—Ä–æ–±–ª–µ–º–∞ 4: "Network request failed"

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API URL (Android: `10.0.2.2:3000`, iOS: `localhost:3000`)
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 5: –ü–∞—Ä–æ–ª—å –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è

**–†—ñ—à–µ–Ω–Ω—è:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –±—É–≤ –≤–≤–µ–¥–µ–Ω–∏–π –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –ø–∞—Ä–æ–ª—é (–º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–µ–ª–∏–∫—ñ/–º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏)

---

## üìä –ß–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è

- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- [ ] –û—Ç—Ä–∏–º–∞–Ω–Ω—è SMS –∫–æ–¥—É (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞)
- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- [ ] –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

### –í—Ö—ñ–¥

- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
- [ ] –£—Å–ø—ñ—à–Ω–∏–π –≤—Ö—ñ–¥
- [ ] –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —Ç–æ–∫–µ–Ω—ñ–≤
- [ ] –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω

### –í—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

- [ ] –í—ñ–¥–∫—Ä–∏—Ç—Ç—è –µ–∫—Ä–∞–Ω–∞ "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?"
- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –Ω–æ–º–µ—Ä–∞ —Ç–µ–ª–µ—Ñ–æ–Ω—É
- [ ] –û—Ç—Ä–∏–º–∞–Ω–Ω—è SMS –∫–æ–¥—É (–ø–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞)
- [ ] –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é
- [ ] –í—Ö—ñ–¥ –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º
- [ ] –°—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å –Ω–µ –ø—Ä–∞—Ü—é—î

---

## üéØ –û—á—ñ–∫—É–≤–∞–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

### –ü—ñ—Å–ª—è —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó:

- ‚úÖ –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –≤ –ë–î
- ‚úÖ –ü–∞—Ä–æ–ª—å –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–π
- ‚úÖ `isVerified = true`

### –ü—ñ—Å–ª—è –≤—Ö–æ–¥—É:

- ‚úÖ –¢–æ–∫–µ–Ω–∏ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ —Ç–∞ –∑–±–µ—Ä–µ–∂–µ–Ω—ñ
- ‚úÖ Refresh —Ç–æ–∫–µ–Ω –∑–±–µ—Ä–µ–∂–µ–Ω–∏–π –≤ –ë–î
- ‚úÖ –ü–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –≥–æ–ª–æ–≤–Ω–∏–π –µ–∫—Ä–∞–Ω

### –ü—ñ—Å–ª—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é:

- ‚úÖ –ù–æ–≤–∏–π –ø–∞—Ä–æ–ª—å –∑–∞—Ö–µ—à–æ–≤–∞–Ω–∏–π
- ‚úÖ –°—Ç–∞—Ä–∏–π –ø–∞—Ä–æ–ª—å –Ω–µ –ø—Ä–∞—Ü—é—î
- ‚úÖ –ú–æ–∂–Ω–∞ —É–≤—ñ–π—Ç–∏ –∑ –Ω–æ–≤–∏–º –ø–∞—Ä–æ–ª–µ–º

---

## üìù –ù–æ—Ç–∞—Ç–∫–∏

- **SMS –∫–æ–¥–∏** –≤–∏–≤–æ–¥—è—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞ (development —Ä–µ–∂–∏–º)
- **Rate limiting**: –º–∞–∫—Å–∏–º—É–º 3 SMS –Ω–∞ –≥–æ–¥–∏–Ω—É, 10 SMS –Ω–∞ –¥–æ–±—É
- **–¢–µ—Ä–º—ñ–Ω –¥—ñ—ó –∫–æ–¥—É**: 10 —Ö–≤–∏–ª–∏–Ω
- **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–± –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É**: 3 —Å–ø—Ä–æ–±–∏
- **–¢–æ–∫–µ–Ω–∏**: access token (15 —Ö–≤), refresh token (7 –¥–Ω—ñ–≤)

---

**–£—Å–ø—ñ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è! üöÄ**

---

# –®–≤–∏–¥–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

# ‚úÖ –®–≤–∏–¥–∫–∏–π —á–µ–∫-–ª–∏—Å—Ç –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è –Ω–∞ –µ–º—É–ª—è—Ç–æ—Ä—ñ

## üöÄ –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç (5 —Ö–≤–∏–ª–∏–Ω)

### 1. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ .env —Ñ–∞–π–ª—É

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ –≤ `server/.env` —î –ø—Ä–∞–≤–∏–ª—å–Ω—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è CORS:

```env
CORS_ORIGIN=http://localhost:3000,http://10.0.2.2:3000,http://127.0.0.1:3000
```

**–Ø–∫—â–æ –Ω–µ–º–∞—î - –¥–æ–¥–∞–π—Ç–µ –∞–±–æ –æ–Ω–æ–≤—ñ—Ç—å —Ü–µ–π —Ä—è–¥–æ–∫!**

### 2. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ MongoDB

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ MongoDB Atlas** (—è–∫ —É –≤–∞—à–æ–º—É –≤–∏–ø–∞–¥–∫—É):

- ‚úÖ –ù–ï –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ `MONGODB_URI` –≤ `server/.env` –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π
- ‚úÖ MongoDB Compass - —Ü–µ –ø—Ä–æ—Å—Ç–æ GUI, —Å–µ—Ä–≤–µ—Ä –ø—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB:**

```bash
# macOS
brew services start mongodb-community

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞
mongosh mongodb://localhost:27017/smartcoach
```

### 3. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞

```bash
cd server
npm run dev
```

**–û—á—ñ–∫—É–≤–∞–Ω–∏–π –≤–∏–≤—ñ–¥:**

```
üöÄ –°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–æ –Ω–∞ –ø–æ—Ä—Ç—É 3000
üìù Environment: development
```

### 4. –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞

```bash
curl http://localhost:3000/health
```

–ú–∞—î –ø–æ–≤–µ—Ä–Ω—É—Ç–∏: `{"success":true,"message":"Server is running",...}`

### 5. –ó–∞–ø—É—Å–∫ –º–æ–±—ñ–ª—å–Ω–æ–≥–æ –¥–æ–¥–∞—Ç–∫—É

**Android:**

```bash
npm run android
```

**iOS:**

```bash
npm run ios
```

---

## üì± –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é

### –ö—Ä–æ–∫ 1: –ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ –µ–∫—Ä–∞–Ω "–ó–∞–±—É–ª–∏ –ø–∞—Ä–æ–ª—å?"
2. –í–≤–µ—Å—Ç–∏ –Ω–æ–º–µ—Ä: `+38 098 628 69 74` (–∞–±–æ —ñ–Ω—à–∏–π)
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ù–∞–¥—ñ—Å–ª–∞—Ç–∏ SMS"
4. **–ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞** - —Ç–∞–º –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è SMS –∫–æ–¥
5. –ú–∞—î –≤—ñ–¥–±—É—Ç–∏—Å—è –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É

### –ö—Ä–æ–∫ 2: –í–≤–µ–¥–µ–Ω–Ω—è –∫–æ–¥—É

1. –í–≤–µ—Å—Ç–∏ –∫–æ–¥ –∑ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞ (6 —Ü–∏—Ñ—Ä)
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–î–∞–ª—ñ"
3. –ú–∞—î –≤—ñ–¥–±—É—Ç–∏—Å—è –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –ø–∞—Ä–æ–ª—é

1. –í–≤–µ—Å—Ç–∏ –Ω–æ–≤–∏–π –ø–∞—Ä–æ–ª—å (–º—ñ–Ω—ñ–º—É–º 8 —Å–∏–º–≤–æ–ª—ñ–≤, –≤–µ–ª–∏–∫—ñ/–º–∞–ª—ñ –ª—ñ—Ç–µ—Ä–∏, —Ü–∏—Ñ—Ä–∏)
2. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç–∏ –ø–∞—Ä–æ–ª—å
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ "–ó–º—ñ–Ω–∏—Ç–∏ –ø–∞—Ä–æ–ª—å"
4. –ú–∞—î –≤—ñ–¥–±—É—Ç–∏—Å—è –ø–µ—Ä–µ—Ö—ñ–¥ –Ω–∞ –µ–∫—Ä–∞–Ω –≤—Ö–æ–¥—É

---

## üîç –©–æ –ø–µ—Ä–µ–≤—ñ—Ä—è—Ç–∏

### –í –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞:

- ‚úÖ –ó–∞–ø–∏—Ç–∏ –ø—Ä–∏—Ö–æ–¥—è—Ç—å (–ª–æ–≥—É—é—Ç—å—Å—è)
- ‚úÖ SMS –∫–æ–¥–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è (development —Ä–µ–∂–∏–º)
- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ CORS
- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –≤–∞–ª—ñ–¥–∞—Ü—ñ—ó

### –í –¥–æ–¥–∞—Ç–∫—É:

- ‚úÖ –ù–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ "Network request failed"
- ‚úÖ –ü–æ–º–∏–ª–∫–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ Loading —Å—Ç–∞–Ω–∏ –ø—Ä–∞—Ü—é—é—Ç—å
- ‚úÖ –ù–∞–≤—ñ–≥–∞—Ü—ñ—è –º—ñ–∂ –µ–∫—Ä–∞–Ω–∞–º–∏ –ø—Ä–∞—Ü—é—î

### –í MongoDB:

```bash
mongosh mongodb://localhost:27017/smartcoach

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –¥–∞–Ω–∏—Ö
db.users.find().pretty()
db.verificationcodes.find().pretty()
```

---

## ‚ö†Ô∏è –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### "Network request failed" –Ω–∞ Android

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—å, —â–æ `CORS_ORIGIN` –º—ñ—Å—Ç–∏—Ç—å `http://10.0.2.2:3000`

### CORS –ø–æ–º–∏–ª–∫–∏

**–†—ñ—à–µ–Ω–Ω—è:**

1. –û–Ω–æ–≤—ñ—Ç—å `CORS_ORIGIN` –≤ `.env`
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä

### MongoDB –Ω–µ –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ Atlas:**

- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ `MONGODB_URI` –≤ `.env`
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ IP whitelist –≤ Atlas (0.0.0.0/0 –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)

**–Ø–∫—â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç–µ –ª–æ–∫–∞–ª—å–Ω–∏–π MongoDB:**

- `brew services start mongodb-community`

### SMS –∫–æ–¥ –Ω–µ –≤–∏–¥–Ω–æ

**–†—ñ—à–µ–Ω–Ω—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞ (–Ω–µ –¥–æ–¥–∞—Ç–∫—É!)

---

## üìù –ù–æ—Ç–∞—Ç–∫–∏

- SMS –∫–æ–¥–∏ –≤–∏–≤–æ–¥—è—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞** (development —Ä–µ–∂–∏–º)
- –î–ª—è Android –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `10.0.2.2` –∑–∞–º—ñ—Å—Ç—å `localhost`
- –î–ª—è iOS –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è `localhost`
- Rate limiting –º–æ–∂–µ –æ–±–º–µ–∂—É–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å–ø—Ä–æ–±

---

**–î–µ—Ç–∞–ª—å–Ω–∞ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è:** [TESTING_SETUP_GUIDE.md](../TESTING_SETUP_GUIDE.md)

---

# –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ SMS –∫–æ–¥—É

# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏ –∑ SMS –∫–æ–¥–æ–º

## –©–æ –∑—Ä–æ–±–ª–µ–Ω–æ

1. ‚úÖ –ü–æ–∫—Ä–∞—â–µ–Ω–æ –≤–∏–≤—ñ–¥ –∫–æ–¥—É –≤ –∫–æ–Ω—Å–æ–ª—å (–±—ñ–ª—å—à –ø–æ–º—ñ—Ç–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç)
2. ‚úÖ –î–æ–¥–∞–Ω–æ –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è –Ω–∞ –∫–æ–∂–Ω–æ–º—É –µ—Ç–∞–ø—ñ
3. ‚úÖ –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

## –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

### 1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä

```bash
cd server
# –ó—É–ø–∏–Ω—ñ—Ç—å –ø–æ—Ç–æ—á–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
npm run dev
```

### 2. –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç

–í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫ —Ç–∞ —Å–ø—Ä–æ–±—É–π—Ç–µ "–ó–∞–±—É—Ç–∏ –ø–∞—Ä–æ–ª—å" –∑ –Ω–æ–º–µ—Ä–æ–º —Ç–µ–ª–µ—Ñ–æ–Ω—É.

### 3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞

–í–∏ –º–∞—î—Ç–µ –ø–æ–±–∞—á–∏—Ç–∏ –æ–¥–∏–Ω –∑ –Ω–∞—Å—Ç—É–ø–Ω–∏—Ö –≤–∏–ø–∞–¥–∫—ñ–≤:

#### ‚úÖ –Ø–∫—â–æ –≤—Å–µ –ø—Ä–∞—Ü—é—î:

```
==================================================
üì± SMS –ö–û–î –í–ï–†–ò–§–Ü–ö–ê–¶–Ü–á
üìû –ù–æ–º–µ—Ä: +380501234567
üîë –ö–æ–¥: 123456
==================================================
```

#### ‚ö†Ô∏è –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î:

```
‚ö†Ô∏è –°–ø—Ä–æ–±–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
```

#### ‚ùå –Ø–∫—â–æ rate limiting:

```
–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç SMS. –ú–∞–∫—Å–∏–º—É–º 3 SMS –Ω–∞ –≥–æ–¥–∏–Ω—É.
```

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –Ω–µ–º–∞—î –≤ –ë–î

**–°–∏–º–ø—Ç–æ–º:** –í –∫–æ–Ω—Å–æ–ª—ñ –∑'—è–≤–ª—è—î—Ç—å—Å—è "‚ö†Ô∏è –°–ø—Ä–æ–±–∞ –≤—ñ–¥–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é –¥–ª—è –Ω–µ—ñ—Å–Ω—É—é—á–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞"

**–†—ñ—à–µ–Ω–Ω—è:**

1. –°–ø–æ—á–∞—Ç–∫—É –∑–∞—Ä–µ—î—Å—Ç—Ä—É–π—Ç–µ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ —á–µ—Ä–µ–∑ `/api/v1/auth/register`
2. –ê–±–æ —Å—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤—Ä—É—á–Ω—É –≤ MongoDB

**–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞:**

```bash
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ MongoDB Compass –∞–±–æ mongosh
# –°—Ç–≤–æ—Ä—ñ—Ç—å –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ –ø–∞—Ä–æ–ª–µ–º
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Rate limiting

**–°–∏–º–ø—Ç–æ–º:** –ü–æ–º–∏–ª–∫–∞ "–ü–µ—Ä–µ–≤–∏—â–µ–Ω–æ –ª—ñ–º—ñ—Ç SMS"

**–†—ñ—à–µ–Ω–Ω—è:**

- –ó–∞—á–µ–∫–∞–π—Ç–µ 1 –≥–æ–¥–∏–Ω—É
- –ê–±–æ –∑–º—ñ–Ω—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
- –ê–±–æ –æ—á–∏—Å—Ç—ñ—Ç—å –∫–æ–¥–∏ –≤ –ë–î:
  ```javascript
  // –í MongoDB Compass –∞–±–æ mongosh
  db.verificationcodes.deleteMany({phone: '+380501234567'});
  ```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –ó–∞–ø–∏—Ç –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç—å –¥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–°–∏–º–ø—Ç–æ–º:** –ù—ñ—á–æ–≥–æ –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è –≤ –∫–æ–Ω—Å–æ–ª—ñ

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**

1. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—â–µ–Ω–∏–π:

   ```bash
   curl http://localhost:3000/health
   ```

2. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ API URL –≤ –¥–æ–¥–∞—Ç–∫—É:

   - Android: `http://10.0.2.2:3000`
   - iOS: `http://localhost:3000`

3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ CORS –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤ `server/.env`:

   ```env
   CORS_ORIGIN=http://localhost:3000,http://10.0.2.2:3000,http://127.0.0.1:3000
   ```

4. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ –ø–æ–º–∏–ª–∫–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ö–æ–¥ –Ω–µ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ pino logger

**–†—ñ—à–µ–Ω–Ω—è:** –ö–æ–¥ —Ç–µ–ø–µ—Ä –≤–∏–≤–æ–¥–∏—Ç—å—Å—è —á–µ—Ä–µ–∑ `console.log`, —è–∫–∏–π –∑–∞–≤–∂–¥–∏ –ø—Ä–∞—Ü—é—î, –Ω–∞–≤—ñ—Ç—å —è–∫—â–æ pino logger –Ω–µ –ø–æ–∫–∞–∑—É—î –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è.

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ cURL

–Ø–∫—â–æ –¥–æ–¥–∞—Ç–æ–∫ –Ω–µ –ø—Ä–∞—Ü—é—î, –ø—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —á–µ—Ä–µ–∑ cURL:

```bash
curl -X POST http://localhost:3000/api/v1/auth/forgot-password \
  -H "Content-Type: application/json" \
  -d '{"phone": "+380501234567"}'
```

**–û—á—ñ–∫—É–≤–∞–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å:**

```json
{
  "success": true,
  "message": "–ö–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ –Ω–∞ –≤–∞—à –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É",
  "code": "123456"
}
```

**–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞** - —Ç–∞–º –º–∞—î –∑'—è–≤–∏—Ç–∏—Å—è –∫–æ–¥!

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –≤ MongoDB

```javascript
// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ–¥—ñ–≤ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
db.verificationcodes.find().pretty();

// –ü–µ—Ä–µ–≥–ª—è–¥ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
db.users.find().pretty();

// –û—á–∏—â–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö –∫–æ–¥—ñ–≤
db.verificationcodes.deleteMany({expiresAt: {$lt: new Date()}});
```

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä
2. –°–ø—Ä–æ–±—É–π—Ç–µ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –∑–∞–ø–∏—Ç
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –∫–æ–Ω—Å–æ–ª—å —Å–µ—Ä–≤–µ—Ä–∞
4. –Ø–∫—â–æ –∫–æ–¥ –Ω–µ –∑'—è–≤–ª—è—î—Ç—å—Å—è - –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ –≤–∏—â–µ

---

**–í–∞–∂–ª–∏–≤–æ:** –ö–æ–¥ –≤–∏–≤–æ–¥–∏—Ç—å—Å—è **—Ç—ñ–ª—å–∫–∏ –≤ –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞**, –Ω–µ –≤ –∫–æ–Ω—Å–æ–ª—ñ –¥–æ–¥–∞—Ç–∫—É!

---

# –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ –ø–∞—Ä–æ–ª—é

# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø–æ–º–∏–ª–∫–∏ "–ü–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π"

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—Ä–∏ –≤–≤–µ–¥–µ–Ω–Ω—ñ –∫–æ–¥—É –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –ø—ñ–¥ —á–∞—Å —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó –≤–∏–Ω–∏–∫–∞–ª–∞ –ø–æ–º–∏–ª–∫–∞:

```
User validation failed: password: –ü–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π
```

## –ü—Ä–∏—á–∏–Ω–∞

–ú–æ–¥–µ–ª—å `User` –º–∞–ª–∞ –ø–æ–ª–µ `password` —è–∫ –æ–±–æ–≤'—è–∑–∫–æ–≤–µ (`required: true`), –∞–ª–µ –ø—Ä–∏ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ–¥—É —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –±–µ–∑ –ø–∞—Ä–æ–ª—è (–ø–∞—Ä–æ–ª—å –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –ø—ñ–∑–Ω—ñ—à–µ –≤ `create-password`).

## –†—ñ—à–µ–Ω–Ω—è

### 1. –ó—Ä–æ–±–ª–µ–Ω–æ `password` –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º –≤ –º–æ–¥–µ–ª—ñ

**–§–∞–π–ª:** `server/src/models/User.model.ts`

- –ó–º—ñ–Ω–µ–Ω–æ `required: true` –Ω–∞ `required: false`
- –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é —á–µ—Ä–µ–∑ `validate` –¥–ª—è –ø–µ—Ä–µ–≤—ñ—Ä–∫–∏ –º—ñ–Ω—ñ–º–∞–ª—å–Ω–æ—ó –¥–æ–≤–∂–∏–Ω–∏ (—è–∫—â–æ –ø–∞—Ä–æ–ª—å –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π)
- –û–Ω–æ–≤–ª–µ–Ω–æ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IUser`: `password?: string`

### 2. –î–æ–¥–∞–Ω–æ –≤–∞–ª—ñ–¥–∞—Ü—ñ—é –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ `createPassword`

**–§–∞–π–ª:** `server/src/controllers/auth.controller.ts`

–î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —â–æ –ø–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –ø—Ä–∏ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—ñ:

```typescript
if (!password || password.trim().length === 0) {
  res.status(400).json({
    success: false,
    message: "–ü–∞—Ä–æ–ª—å –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π",
  });
  return;
}
```

### 3. –î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É –≤ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä—ñ `login`

–î–æ–¥–∞–Ω–æ –ø–µ—Ä–µ–≤—ñ—Ä–∫—É, —â–æ —É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π –ø–∞—Ä–æ–ª—å:

```typescript
if (!user.password) {
  res.status(400).json({
    success: false,
    message:
      '–ü–∞—Ä–æ–ª—å –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ. –°–ø–æ—á–∞—Ç–∫—É —Å—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å —á–µ—Ä–µ–∑ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é.',
  });
  return;
}
```

## –©–æ –∑–º—ñ–Ω–∏–ª–æ—Å—è

### –î–æ:

- ‚ùå –ü–∞—Ä–æ–ª—å –±—É–≤ –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–º –ø–æ–ª–µ–º –≤ –º–æ–¥–µ–ª—ñ
- ‚ùå –ù–µ–º–æ–∂–ª–∏–≤–æ –±—É–ª–æ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–µ–∑ –ø–∞—Ä–æ–ª—è
- ‚ùå –ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∫–æ–¥—É —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó

### –ü—ñ—Å–ª—è:

- ‚úÖ –ü–∞—Ä–æ–ª—å –Ω–µ–æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π –≤ –º–æ–¥–µ–ª—ñ
- ‚úÖ –ú–æ–∂–Ω–∞ —Å—Ç–≤–æ—Ä–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –±–µ–∑ –ø–∞—Ä–æ–ª—è (–ø—ñ—Å–ª—è –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó)
- ‚úÖ –ü–∞—Ä–æ–ª—å –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –≤ `create-password`
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è –ø–∞—Ä–æ–ª—è –Ω–∞ —Ä—ñ–≤–Ω—ñ –∫–æ–Ω—Ç—Ä–æ–ª–µ—Ä–∞
- ‚úÖ –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø–∞—Ä–æ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥—ñ

## –Ø–∫ –ø–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:**

   ```bash
   cd server
   # –ó—É–ø–∏–Ω—ñ—Ç—å –ø–æ—Ç–æ—á–Ω–∏–π —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
   npm run dev
   ```

2. **–ü—Ä–æ—Ç–µ—Å—Ç—É–π—Ç–µ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—é:**

   - –í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É
   - –û—Ç—Ä–∏–º–∞–π—Ç–µ SMS –∫–æ–¥
   - –í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
   - –°—Ç–≤–æ—Ä—ñ—Ç—å –ø–∞—Ä–æ–ª—å

3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤ MongoDB:**

   ```javascript
   db.users.find({phone: '+380981234567'}).pretty();
   ```

   –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –º–∞—î –±—É—Ç–∏ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –∑ `isVerified: true` —Ç–∞ –±–µ–∑ `password` –¥–æ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—è.

## –õ–æ–≥—ñ–∫–∞ —Ä–æ–±–æ—Ç–∏

1. **–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è (`/register`):**

   - –í—ñ–¥–ø—Ä–∞–≤–∫–∞ SMS –∫–æ–¥—É
   - –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –ù–ï —Å—Ç–≤–æ—Ä—é—î—Ç—å—Å—è

2. **–í–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—è –∫–æ–¥—É (`/verify-code`):**

   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–¥—É
   - –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –ë–ï–ó –ø–∞—Ä–æ–ª—è
   - `isVerified: true`

3. **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é (`/create-password`):**

   - –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –ø–∞—Ä–æ–ª—é
   - –•–µ—à—É–≤–∞–Ω–Ω—è –ø–∞—Ä–æ–ª—é
   - –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞

4. **–í—Ö—ñ–¥ (`/login`):**
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –Ω–∞—è–≤–Ω–æ—Å—Ç—ñ –ø–∞—Ä–æ–ª—è
   - –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—ñ –ø–∞—Ä–æ–ª—é
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç–æ–∫–µ–Ω—ñ–≤

---

**–ü—Ä–æ–±–ª–µ–º—É –≤–∏—Ä—ñ—à–µ–Ω–æ! ‚úÖ**

---

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É (Redux Thunks)

# –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É

## –°—Ç–∞—Ç—É—Å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—ñ

‚úÖ **–î–æ–¥–∞—Ç–æ–∫ –≥–æ—Ç–æ–≤–∏–π –¥–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –±–µ–∫–µ–Ω–¥—É**

–í—Å—ñ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ:

- ‚úÖ Thunk'–∏ —Å—Ç–≤–æ—Ä–µ–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö CRUD –æ–ø–µ—Ä–∞—Ü—ñ–π
- ‚úÖ ExtraReducers –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –¥–ª—è –æ–±—Ä–æ–±–∫–∏ —Å—Ç–∞–Ω—ñ–≤
- ‚úÖ Loading —Ç–∞ error —Å—Ç–∞–Ω–∏ –¥–æ–¥–∞–Ω—ñ –≤ Redux store
- ‚úÖ –í–∞–ª—ñ–¥–∞—Ü—ñ—è payload –¥–æ–¥–∞–Ω–∞
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª—ñ–∑–æ–≤–∞–Ω–∏–π –µ–∫—Å–ø–æ—Ä—Ç thunk'—ñ–≤

## –Ø–∫ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏ –±–µ–∫–µ–Ω–¥

### 1. –û–Ω–æ–≤—ñ—Ç—å thunk'–∏ –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ API –∑–∞–ø–∏—Ç–∞–º–∏

#### –î–ª—è –∫–ª—ñ—î–Ω—Ç—ñ–≤ (`src/redux/thunks/clientsThunk.js`):

```javascript
// –ó–∞–º—ñ–Ω—ñ—Ç—å –∑–∞–≥–ª—É—à–∫—É –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç:
export const fetchClients = createAsyncThunk(
  'clients/fetchClients',
  async (_, {rejectWithValue}) => {
    try {
      const response = await fetch('https://your-api.com/api/clients', {
        headers: {
          Authorization: `Bearer ${token}`, // —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
        },
      });
      if (!response.ok) throw new Error('Failed to fetch clients');
      return await response.json();
    } catch (error) {
      return rejectWithValue(error.message || '–ü–æ–º–∏–ª–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤');
    }
  },
);
```

#### –î–ª—è –ø–ª–∞–Ω—ñ–≤ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å (`src/redux/thunks/workoutPlansThunk.js`):

–ê–Ω–∞–ª–æ–≥—ñ—á–Ω–æ –æ–Ω–æ–≤—ñ—Ç—å –≤—Å—ñ thunk'–∏, –∑–∞–º—ñ–Ω–∏–≤—à–∏ TODO-–∫–æ–º–µ–Ω—Ç–∞—Ä—ñ –Ω–∞ —Ä–µ–∞–ª—å–Ω—ñ API –∑–∞–ø–∏—Ç–∏.

### 2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

#### –ü—Ä–∏–∫–ª–∞–¥ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∫–ª—ñ—î–Ω—Ç—ñ–≤:

```javascript
import {useDispatch, useSelector} from 'react-redux';
import {fetchClients, saveClient} from '../redux/thunks';

const MyComponent = () => {
  const dispatch = useDispatch();
  const {clients, loading, error} = useSelector(state => ({
    clients: state.app.clients,
    loading: state.app.loading.clients,
    error: state.app.error.clients,
  }));

  useEffect(() => {
    dispatch(fetchClients());
  }, [dispatch]);

  const handleSave = async clientData => {
    try {
      await dispatch(saveClient(clientData)).unwrap();
      // –£—Å–ø—ñ—à–Ω–æ –∑–±–µ—Ä–µ–∂–µ–Ω–æ
    } catch (error) {
      // –û–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
      console.error(error);
    }
  };

  if (loading) return <Text>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</Text>;
  if (error) return <Text>–ü–æ–º–∏–ª–∫–∞: {error}</Text>;

  return <View>...</View>;
};
```

### 3. –î–æ—Å—Ç—É–ø–Ω—ñ thunk'–∏

#### –ö–ª—ñ—î–Ω—Ç–∏:

- `fetchClients()` - –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—ñ—Ö –∫–ª—ñ—î–Ω—Ç—ñ–≤
- `saveClient(clientData)` - –∑–±–µ—Ä–µ–≥—Ç–∏ –Ω–æ–≤–æ–≥–æ –∫–ª—ñ—î–Ω—Ç–∞
- `updateClient({clientId, clientData})` - –æ–Ω–æ–≤–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞
- `deleteClient(clientId)` - –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–ª—ñ—î–Ω—Ç–∞

#### –ü–ª–∞–Ω–∏ —Ç—Ä–µ–Ω—É–≤–∞–Ω—å:

- `fetchWorkoutPlans()` - –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –≤—Å—ñ –ø–ª–∞–Ω–∏
- `fetchWorkoutPlansByDate(date)` - –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –ø–ª–∞–Ω–∏ –∑–∞ –¥–∞—Ç–æ—é
- `saveWorkoutPlan(planData)` - –∑–±–µ—Ä–µ–≥—Ç–∏ –ø–ª–∞–Ω
- `updateWorkoutPlan({planId, planData})` - –æ–Ω–æ–≤–∏—Ç–∏ –ø–ª–∞–Ω
- `deleteWorkoutPlan(planId)` - –≤–∏–¥–∞–ª–∏—Ç–∏ –ø–ª–∞–Ω

### 4. –°—Ç–∞–Ω–∏ –≤ Redux

–ü—ñ—Å–ª—è –≤–∏–∫–ª–∏–∫—É thunk'—ñ–≤, —Å—Ç–∞–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è:

```javascript
// Loading —Å—Ç–∞–Ω–∏
state.app.loading.clients; // boolean
state.app.loading.workoutPlans; // boolean

// Error —Å—Ç–∞–Ω–∏
state.app.error.clients; // string | null
state.app.error.workoutPlans; // string | null

// –î–∞–Ω—ñ
state.app.clients; // EntityAdapter state
state.app.trainings; // EntityAdapter state
```

### 5. –ú—ñ–≥—Ä–∞—Ü—ñ—è —ñ—Å–Ω—É—é—á–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤

–ó–∞–º—ñ–Ω—ñ—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ action'–∏ –Ω–∞ async thunk'–∏:

**–ë—É–ª–æ:**

```javascript
dispatch(createNewClients(clientData));
```

**–°—Ç–∞–ª–æ:**

```javascript
dispatch(saveClient(clientData));
// –∞–±–æ –∑ –æ–±—Ä–æ–±–∫–æ—é –ø–æ–º–∏–ª–æ–∫:
try {
  await dispatch(saveClient(clientData)).unwrap();
} catch (error) {
  // –æ–±—Ä–æ–±–∫–∞ –ø–æ–º–∏–ª–∫–∏
}
```

## –ü—Ä–∏–º—ñ—Ç–∫–∏

- –í—Å—ñ thunk'–∏ –º–∞—é—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—é payload
- –ü–æ–º–∏–ª–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ `state.app.error`
- Loading —Å—Ç–∞–Ω–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –æ–Ω–æ–≤–ª—é—é—Ç—å—Å—è
- ExtraReducers –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ –¥–ª—è –≤—Å—ñ—Ö thunk'—ñ–≤
